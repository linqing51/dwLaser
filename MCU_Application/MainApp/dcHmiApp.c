#include "dcHmiApp.h"
/*****************************************************************************/
#define FSMSTEP_POWERUP												0//上电
//HMI初始操作
#define FSMSTEP_RESTORE_HMI											100//HMI 恢复储存数据
//自检状态
#define FSMSTEP_CHECK_PROCESSOR										200//处理器自检
#define FSMSTEP_CHECK_EPROM											201//非易内存自检
#define FSMSTEP_CHECK_SI7060										202//温度传感器通信错误		
#define FSMSTEP_CHECK_MCP79412										203//RTC通信错误
#define FSMSTEP_CHECK_SPI_FLASH										204//备份FLSAH自检
#define FSMSTEP_CHECK_CH376											205//USBHOST模块自检
#define FSMSTEP_CHECK_DK25L											206//NFC模块自检
#define FSMSTEP_CHECK_NRF24L01										207//无线脚踏RF自检
#define FSMSTEP_CHECK_TEMPERATURE									208//温度自检
#define FSMSTEP_CHECK_LASER_DRIVER									209//激光驱动器自检
#define FSMSTEP_CHECK_WIRELESS_FOOTCONTROL							210//无线脚踏自检自检
#define FSMSTEP_CHECK_PROBATION										211//试用期自检失败
#define FSMSTEP_CHECK_FAIL_DISPLAY									299//失败自检
//密码输入状态
#define FSMSTEP_WAIT_ENTER_PASSCODE									300
#define FSMSTEP_PASSCODE_INPUT										301//密码输入状态
#define FSMSTEP_PASSCODE_NEW0										302//密码更改状态第一次输入
#define FSMSTEP_PASSCODE_NEW1										303//密码更改状态第二次输入
//STNADBY状态
#define FSMSTEP_STANDBY												400//等待状态
#define FSMSTEP_READY_LOAD_PARA										401//载入参数
#define FSMSTEP_READY_LOAD_DONE										402//载入参数完毕
#define FSMSTEP_LASER_WAIT_TRIGGER									403//激光触发
#define FSMSTEP_LASER_EMITING										404//激光发射中
#define FSMSTEP_LASER_STOP											405//激光发射结束
//READY状态
#define FSMSTEP_READY												500
//选项状态
#define FSMSTEP_OPTION												600//选项菜单
#define FSMSTEP_INFORMATION											700
#define FSMSTEP_SCHEME												800//方案菜单
#define FSMSTEP_DIAGNOSIS  											900//诊断菜单
#define FSMSTEP_CORRECTION											10000//功率校正

#define DEF_LANG_EN													0x80
#define DEF_LANG_CN													0x81
#define DEF_LANG_JP													0x82
/*****************************************************************************/
#define FLASH_DATA_VERSION  										0XAABB0000
#define FLASH_DATA_ADDR     										0X00000000
/*****************************************************************************/
uint8_t hmiCmdBuffer[CMD_MAX_SIZE];//指令缓存
uint16_t hmiCmdSize;//已缓冲的指令数
void UpdateUI(void);
/*****************************************************************************/
#if CONFIG_USING_DCHMI_APP == 1
static void unselectSchemeNum(sel){//反选方案条
	switch(sel){
		case 0:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_0 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_0, 0x0);
			break;
		}
		case 1:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_1 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_1, 0x0);
			break;
		}
		case 2:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_2 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_2, 0x0);
			break;
		}
		case 3:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_3 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_3, 0x0);
			break;
		}
		case 4:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_4 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_4, 0x0);
			break;
		}
		case 5:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_5 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_5, 0x0);
			break;
		}
		case 6:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_6 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_6, 0x0);
			break;
		}
		case 7:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_7 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_7, 0x0);
			break;
		}
		case 8:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_8 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_8, 0x0);
			break;
		}
		case 9:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_9 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_9, 0x0);
			break;
		}
		case 10:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_10 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_10, 0x0);
			break;
		}
		case 11:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_11 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_11, 0x0);
			break;
		}
		case 12:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_12 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_12, 0x0);
			break;
		}
		case 13:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_13 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_13, 0x0);
			break;
		}
		case 14:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_14 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_14, 0x0);
			break;
		}
		case 15:{
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_15 ,HMI_WHITE);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_15, 0x0);
			break;
		}
		default:break;
	}
}
static void unselectSchemeAll(void){
	uint8_t i;
	for(i = 0; i< 15;i++){
		unselectSchemeNum(i);
	}
}
static void seletcSchemeNum(uint16_t sel){
	switch(sel){
		case 0:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_0 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_0, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 0;
			break;
		}
		case 1:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_1 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_1, 0x1);		
			NVRAM0[EM_SCHEME_NUM_TMP] = 1;
			break;
		}
		case 2:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_2 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_2, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 2;
			break;
		}
		case 3:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_3 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_3, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 3;
			break;
		}
		case 4:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_4 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_4, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 4;
			break;
		}
		case 5:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_5 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_5, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 5;
			break;
		}
		case 6:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_6 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_6, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 6;
			break;
		}
		case 7:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_7 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_7, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 7;
			break;
		}
		case 8:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_8 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_8, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 8;
			break;
		}
		case 9:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_9 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_9, 0x1);	
			NVRAM0[EM_SCHEME_NUM_TMP] = 9;
			break;
		}
		case 10:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_10 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_10, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 10;
			break;
		}
		case 11:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_11 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_11, 0x1);	
			NVRAM0[EM_SCHEME_NUM_TMP] = 11;
			break;
		}
		case 12:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_12 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_12, 0x1);	
			NVRAM0[EM_SCHEME_NUM_TMP] = 12;
			break;
		}
		case 13:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_13 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_13, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 13;
			break;
		}
		case 14:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_14 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_14, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 14;
			break;
		}
		case 15:{
			unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
			SetControlBackColor(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_TEXTDISPLAY_SCHEME_15 ,HMI_CYAN);
			SetButtonValue(GDDC_PAGE_SCHEME_0, GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_15, 0x1);
			NVRAM0[EM_SCHEME_NUM_TMP] = 15;
			break;
		}
		default:break;
	}
	
}
static void standbyTouchEnable(int8_t enable){//
	switch(NVRAM0[EM_LASER_PULSE_MODE]){
		case LASER_MODE_CW:{
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, enable);
			break;
		}
		case LASER_MODE_SP:{
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_PROGRESS_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POSWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_POSWIDTH_DEC, enable);
			break;
		}
		case LASER_MODE_MP:{
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_DERMA, enable);		
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POSWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_POSWIDTH_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_NEGWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_NEGWIDTH_DEC, enable);
			break;
		}
		case LASER_MODE_GP:{
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POSWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_POSWIDTH_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_NEGWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_NEGWIDTH_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_TIMES_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_TIMES_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_GROUP_OFF_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_GROUP_OFF_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH1, enable);
			break;
		}
		case LASER_MODE_DERMA:{
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POSWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_POSWIDTH_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_NEGWIDTH_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_NEGWIDTH_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, enable);	
			break;
		}
		case LASER_MODE_SIGNAL:{
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH0_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH0_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH1_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH1_DEC, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_CW, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_MP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_GP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SP, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_DERMA, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_ENTER_OPTION, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_ENTER_SCHEME, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_SAVE, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_NEXT, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_LAST, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_BOTH, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_RESET, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SIGNAL, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH0, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH1, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_ENERGY_INTERVAL_ADD, enable);
			SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_ENERGY_INTERVAL_DEC, enable);
			break;
		}
		default:break;
	}		
}
static void updaePowerDisplay(uint8_t ch, uint16_t mode){//更新功率显示
	uint8_t dispBuf[16];
	switch(mode){
		case LASER_MODE_CW:{
			switch(ch){
				case LASER_SELECT_CH0:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_CH1:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_BOTH:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				default:break;
			}
		}
		case LASER_MODE_SP:{
			switch(ch){
				case LASER_SELECT_CH0:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_CH1:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_BOTH:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				default:break;
			}					
			break;
		}
		case LASER_MODE_GP:{
			switch(ch){
				case LASER_SELECT_CH0:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_CH1:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_BOTH:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				default:break;
			}
			break;
		}
		case LASER_MODE_DERMA:{
			switch(ch){
				case LASER_SELECT_CH0:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_CH1:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_BOTH:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				default:break;
			}
			break;
		}
		case LASER_MODE_SIGNAL:{
			switch(ch){
				case LASER_SELECT_CH0:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_CH1:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				case LASER_SELECT_BOTH:{
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH0]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_POWER_CH0, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_LASER_POWER_CH1]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_POWER_CH1, dispBuf);
					sprintf(dispBuf, "%4.1f W", ((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10));
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_TOTAL_POWER, dispBuf);
					break;
				}
				default:break;
			}
			break;
		}
		default:break;
	}
}
static void updateStandbyDisplay(void){//更新方案显示
	uint8_t dispBuf[16];
	NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
	switch(NVRAM0[EM_LASER_PULSE_MODE]){
		case LASER_MODE_CW:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_CW_0;//切换待机页面						
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_CW);
			SetTextInt32(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);
			SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_CW, 0x01);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_MP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_GP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_SP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_SIGNAL, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_MODE_DERMA, 0x00);
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_CW_0;
			break;			
		}
		case LASER_MODE_SP:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_SP_0;//切换待机页面		
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_SP);
			SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);		
			SetProgressValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));		
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_CW, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_MP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_GP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_SP, 0x01);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_SIGNAL, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_MODE_DERMA, 0x00);
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_SP_POSWIDTH]);
			SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POSWIDTH, dispBuf);		
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_SP_0;
			break;		
		}
		case LASER_MODE_MP:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_MP_0;//切换待机页面
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_MP);
			SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);			
			SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));			
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_CW, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_MP, 0x01);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_GP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_SP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_SIGNAL, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_MODE_DERMA, 0x00);
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_MP_POSWIDTH]);
			SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_POSWIDTH, dispBuf);
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_MP_NEGWIDTH]);
			SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NEGWIDTH, dispBuf);
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_MP_0;
			break;
		}
		case LASER_MODE_GP:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_GP_0;//切换待机页面
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_GP);
			SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);
			SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));			
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_CW, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_MP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_GP, 0x01);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_SP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_SIGNAL, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_MODE_DERMA, 0x00);
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_GP_POSWIDTH]);
			SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POSWIDTH, dispBuf);
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_GP_NEGWIDTH]);
			SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NEGWIDTH, dispBuf);			
			sprintf(dispBuf, "%d", NVRAM0[EM_LASER_GP_TIMES]);
			SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TIMES, dispBuf);	
			sprintf(dispBuf, "%dmS", NVRAM0[EM_LASER_GP_GROUP_OFF]);
			SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_GROUP_OFF, dispBuf);	
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_GP_0;
			break;
		}
		case LASER_MODE_DERMA:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_DERMA_0;//切换待机页面
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_DERMA);
			SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);
			SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));				
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_CW, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_MP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_GP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SIGNAL, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_MODE_DERMA, 0x01);
			SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_DERMA_POSWIDTH], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_DERMA_NEGWIDTH], 1, 0);
			switch(NVRAM0[EM_LASER_DERMA_SPOT_SIZE]){
				case DERMA_SPOT_SIZE_0MM5:{
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, 0x01);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, 0x00);
					SetTextFloat(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_ENERGY_DENSITY, (((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10) / 0.0019625), 1 , 1);
					break;
				}
				case DERMA_SPOT_SIZE_1MM0:{
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, 0x01);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, 0x00);
					SetTextFloat(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_ENERGY_DENSITY, (((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10) / 0.00785), 1 , 1);
					break;
				}
				case DERMA_SPOT_SIZE_2MM0:{
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, 0x01);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, 0x00);
					SetTextFloat(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_ENERGY_DENSITY, (((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10) / 0.0314926), 1 , 1);
					break;
				}
				case DERMA_SPOT_SIZE_3MM0:{
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, 0x00);
					SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, 0x01);
					SetTextFloat(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_ENERGY_DENSITY, (((fp32_t)(NVRAM0[EM_TOTAL_POWER]) / 10) / 0.0706853), 1 , 1);
					break;
				}
				default:break;
			}
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_DERMA_0;	
			break;
		}
		case LASER_MODE_SIGNAL:{
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_SIGNAL_0;//切换待机页面
			updaePowerDisplay(LASER_SELECT_BOTH, LASER_MODE_SIGNAL);
			SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY ,NVRAM0[EM_RELEASE_TOTAL_ENERGY], 1, 0);
			SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_RELEASE_TIME ,NVRAM0[EM_RELEASE_TOTAL_TIME], 1, 0);		
			SetProgressValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
			SetProgressValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
			SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_NAME, (char*)(&NVRAM0[EM_LASER_SCHEME_NAME]));			
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_CW, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_MP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_GP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SP, 0x00);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SIGNAL, 0x01);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_DERMA, 0x00);
			SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY_INTERVAL ,NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL], 1, 0);
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_STANDBY_SIGNAL_0;	
			break;
		}
		default:break;
	}
	SetScreen(NVRAM0[EM_DC_PAGE]);
}

static void updateOptionDisplay(void){//更新选项显示
	if(LD(MR_FOOSWITCH_HAND_SWITCH)){
		SetButtonValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_KEY_HAND_SWITCH_ON, 0x01);
	}
	else{
		SetButtonValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_KEY_HAND_SWITCH_ON, 0x00);
	}
	SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_BEEM_VOLUME, NVRAM0[DM_BEEM_VOLUME]);//更新进度条
	SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_AIM_BRG, NVRAM0[DM_AIM_BRG]);//更新进度条
}

void dcHmiLoopInit(void){//初始化模块
	NVRAM0[EM_HMI_OPERA_STEP] = 0;
	NVRAM0[DM_AIM_BRG] = 0x80;
	RES(Y_TEC0);
	RES(Y_TEC1);
	SET(Y_FAN0);
	SET(Y_FAN1);
}
void dcHmiLoop(void){//HMI轮训程序
	if(LD(R_DCHMI_RESET_DONE) && LD(R_DCHMI_RESTORE_DONE)){//HMI复位完成后处理串口指令
		hmiCmdSize = queue_find_cmd(hmiCmdBuffer, CMD_MAX_SIZE);//从缓冲区中获取一条指令         
        if(hmiCmdSize > 0){//接收到指令及判断是否为开机提示                                                            
            ProcessMessage((PCTRL_MSG)hmiCmdBuffer, hmiCmdSize);//指令处理  
        }                                                                             
        if(LDP(SPCOIL_PS100MS) || LD(R_DCHMI_UPDATEUI_REQ)){//每100mS刷新一次UI           
            SET(R_DCHMI_UPDATEUI_DOING);
			UpdateUI();
			RES(R_DCHMI_UPDATEUI_REQ);
			RES(R_DCHMI_UPDATEUI_DOING);
			SET(R_DCHMO_UPDATEUI_DONE);
        } 
	}
	//状态机
	//检查故障状态
#if CONFIG_SKIP_FAULT == 0
	if(LD(X_INTERLOCK)){
		SET(R_FAULT);
	}
	else if(LD(X_FOOTSWITCH_NC)){
		SET(R_FAULT);
	}
	else if(LD(X_FBD0)){
		SET(R_FAULT);
	}
	else if(LD(R_FIBER_ID_PASS_0)){
		SET(R_FAULT);
	}
	else if(LD(R_DIODE_TEMP_HIGH_0)){
		SET(R_FAULT);
	}
	else if(LD(R_ENVI_TEMP_HIGH)){
		SET(R_FAULT);
	}
	else if(LD(R_DRIVE_TEMP_HIGH)){
		SET(R_FAULT);
	}
#endif
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_POWERUP){//上电步骤	
		SET(Y_LED_POWERON);//电源灯常亮
#if CONFIG_USING_BACKGROUND_APP == 1
		loadScheme();//从掉电存储寄存器中恢复方案参数
#endif		
		NVRAM0[EM_DC_DEFAULT_PASSCODE0] = CONFIG_HMI_DEFAULT_PASSSWORD0;
		NVRAM0[EM_DC_DEFAULT_PASSCODE1] = CONFIG_HMI_DEFAULT_PASSSWORD1;
		NVRAM0[EM_DC_DEFAULT_PASSCODE2] = 0;
		NVRAM0[EM_DC_DEFAULT_PASSCODE3] = 0;
		NVRAM0[DM_DC_OLD_PASSCODE2] = 0;
		NVRAM0[DM_DC_OLD_PASSCODE3] = 0;
		
		NVRAM0[EM_DC_NEW_PASSCODE2] = 0;
		NVRAM0[EM_DC_NEW_PASSCODE3] = 0;
		//检查储存密码是否合规
		NVRAM0[TM_START + 0] = NVRAM0[DM_DC_OLD_PASSCODE0] & 0x00FF;
		NVRAM0[TM_START + 1] = (NVRAM0[DM_DC_OLD_PASSCODE0] >> 8) & 0x00FF;
		NVRAM0[TM_START + 2] = NVRAM0[DM_DC_OLD_PASSCODE1] & 0x00FF;
		NVRAM0[TM_START + 3] = (NVRAM0[DM_DC_OLD_PASSCODE1] >> 8) & 0x00FF;
		if((NVRAM0[TM_START + 0] < 0x30) || (NVRAM0[TM_START + 0] > 0x39) ||
		   (NVRAM0[TM_START + 1] < 0x30) || (NVRAM0[TM_START + 1] > 0x39) ||
		   (NVRAM0[TM_START + 2] < 0x30) || (NVRAM0[TM_START + 2] > 0x39) ||
		   (NVRAM0[TM_START + 3] < 0x30) || (NVRAM0[TM_START + 3] > 0x39)){
			NVRAM0[DM_DC_OLD_PASSCODE0] = CONFIG_HMI_DEFAULT_PASSSWORD0;
			NVRAM0[DM_DC_OLD_PASSCODE1] = CONFIG_HMI_DEFAULT_PASSSWORD1;  
		}	
		SET(R_DCHMI_RESET_DOING);
		hmiCmdSize = 0;
		queue_reset();//清空HMI指令接收缓冲区	
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_RESTORE_HMI;
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_RESTORE_HMI){//等待HMI复位
		T100MS(T100MS_HMI_POWERUP_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_HMI_POWERUP_DELAY)){
			T100MS(T100MS_HMI_POWERUP_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			RES(R_DCHMI_RESET_DOING);
			SET(R_DCHMI_RESET_DONE);	
			//HMI从内置FLASH中恢复设置	
			SET(R_DCHMI_RESTORE_DOING);
			FlashRestoreControl(FLASH_DATA_VERSION, FLASH_DATA_ADDR);
			RES(R_DCHMI_RESTORE_DOING);
			SET(R_DCHMI_RESTORE_DONE);
			//设置HMI页面
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_PROCESSOR;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_POWERUP_0;//HMI页面
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_STANDBY, false);
			SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 0);
			SetTextValue(GDDC_PAGE_PASSCODE_0, GDDC_PAGE_PASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
			SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));	
			SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, "Power Up");
			SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 0);			
			SetScreen(NVRAM0[EM_DC_PAGE]);	
			SetControlBackColor(GDDC_PAGE_POWERUP_0, 3, 0x8000);
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_RESTORE_HMI;	
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_PROCESSOR){//处理器自检步骤
		if(floatSumTest()){//测试成功
			SET(R_CHECK_FLOAT_DONE);
			SET(R_CHECK_FLOAT_PASS);
			RES(R_CHECK_FLOAT_FAIL);
			SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROCESSOR_PASS);
			SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 6);	
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_EPROM;
		}
		else{//测试失败
			SET(R_CHECK_FLOAT_DONE);
			RES(R_CHECK_FLOAT_PASS);
			SET(R_CHECK_FLOAT_FAIL);
			SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROCESSOR_FAIL);
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;
		}
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_EPROM){//EPROM自检步骤
		//测试EPROM
#if CONFIG_SPLC_USING_EPROM == 1
		NVRAM0[TM_START + 0] = rand()%0xFF;
		NVRAM0[TM_START + 1] = rand()%0xFF;
		NVRAM0[TM_START + 2] = rand()%0xFF;
		NVRAM0[TM_START + 3] = rand()%0xFF;
		epromWriteOneByte((CONFIG_EPROM_SIZE - 1), NVRAM0[TM_START + 0]);//写EPROM
		epromWriteOneByte((CONFIG_EPROM_SIZE - 2), NVRAM0[TM_START + 1]);//写EPROM
		epromWriteOneByte((CONFIG_EPROM_SIZE - 3), NVRAM0[TM_START + 2]);//写EPROM
		epromWriteOneByte((CONFIG_EPROM_SIZE - 4), NVRAM0[TM_START + 3]);//写EPROM
		//读EPROM
		NVRAM0[TM_START + 4] = epromReadOneByte((CONFIG_EPROM_SIZE - 1));
		NVRAM0[TM_START + 5] = epromReadOneByte((CONFIG_EPROM_SIZE - 2));
		NVRAM0[TM_START + 6] = epromReadOneByte((CONFIG_EPROM_SIZE - 3));
		NVRAM0[TM_START + 7] = epromReadOneByte((CONFIG_EPROM_SIZE - 4));
		if((NVRAM0[TM_START + 0] == NVRAM0[TM_START + 4]) && (NVRAM0[TM_START + 1] == NVRAM0[TM_START + 5]) &&
		   (NVRAM0[TM_START + 2] == NVRAM0[TM_START + 6]) && (NVRAM0[TM_START + 3] == NVRAM0[TM_START + 7])){
			setLedVar(true);
			delayMs(250);
			setLedVar(false);
			delayMs(250);
			setLedVar(true);
			delayMs(250);
			setLedVar(false); 
			SET(R_CHECK_EPROM_PASS);
			NVRAM0[EM_ERROR_CODE] = ERRPR_CODE_NOERR;
		}
		else{
			SET(R_CHECK_EPROM_FAIL);
		}
		T100MS(T100MS_CHECK_EPROM_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_EPROM_DELAY)){
			T100MS(T100MS_CHECK_EPROM_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_EPROM_DONE);
			if(LD(R_CHECK_EPROM_PASS) && LDB(R_CHECK_EPROM_FAIL)){
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_SI7060;
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROCESSOR_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 12);
			}
			else{
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROCESSOR_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_EPROM;
		}
#else
		SET(R_CHECK_EPROM_PASS);
		RES(R_CHECK_EPROM_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_SI7060;
#endif	
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_SI7060){//温度传感器自检步骤
#if CONFIG_SPLC_USING_CH376 == 1
		T100MS(T100MS_CHECK_SI7060_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_SI7060_DELAY)){
			T100MS(T100MS_CHECK_SI7060_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_SI7060_DONE);
			if(LDB(SPCOIL_SI7060_INIT_FAIL)){
				SET(R_CHECK_SI7060_PASS);
				RES(R_CHECK_SI7060_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_MCP79412;					
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_SI7060_PASS[(NVRAM0[DM_LANGUAGE])]);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 18);
			}
			else{
				RES(R_CHECK_SI7060_PASS);
				SET(R_CHECK_SI7060_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_SI7060_FAIL[(NVRAM0[DM_LANGUAGE])]);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_SI7060;
		}
#else
		SET(R_CHECK_SI7060_PASS);
		RES(R_CHECK_SI7060_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_MCP79412;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_MCP79412){//外部RTC时钟自检
#if CONFIG_SPLC_USING_MCP79412 == 1
		T100MS(T100MS_CHECK_MCP79412_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_MCP79412_DELAY)){
			T100MS(T100MS_CHECK_MCP79412_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_MCP79412_DONE);
			if(LDB(SPCOIL_MCP79412_INIT_FAIL)){
				SET(R_CHECK_MCP79412_PASS);
				RES(R_CHECK_MCP79412_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_BACKUP_FLASH;					
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_MCP79412_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 24);
			}
			else{
				SET(R_CHECK_MCP79412_PASS);
				RES(R_CHECK_MCP79412_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_MCP79412_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_MCP79412;
		}
#else
		SET(R_CHECK_MCP79412_PASS);
		RES(R_CHECK_MCP79412_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_SPI_FLASH;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_SPI_FLASH){//外部SPI FLASH自检
#if CONFIG_SPLC_USING_SPI_FLASH == 1
		T100MS(T100MS_CHECK_SPI_FLASH_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_SPI_FLASH_DELAY)){
			T100MS(T100MS_CHECK_SPI_FLASH_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_BACKUP_MEMORY_DONE);
			if(LDB(SPCOIL_MCP79412_INIT_FAIL)){
				SET(R_CHECK_BACKUP_MEMORY_PASS);
				RES(R_CHECK_BACKUP_MEMORY_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_CH376;					
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_BACKUP_FLASH_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 30);
			}
			else{
				RES(R_CHECK_BACKUP_MEMORY_PASS);
				SET(R_CHECK_BACKUP_MEMORY_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_BACKUP_FLASH_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_BACKUP_FLASH;
		}
#else
		SET(R_CHECK_SPI_MEMORY_PASS);
		RES(R_CHECK_SPI_MEMORY_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_CH376;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_CH376){//CH376 USB自检步骤
#if CONFIG_SPLC_USING_CH376 == 1		
		T100MS(T100MS_CHECK_CH376_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_CH376_DELAY)){
			T100MS(T100MS_CHECK_CH376_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_CH376_DONE);
			if(LDB(SPCOIL_CH376_INIT_FAIL)){
				SET(R_CHECK_CH376_PASS);
				RES(R_CHECK_CH376_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_DK25L;					
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_CH376_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 36);
			}
			else{
				RES(R_CHECK_CH376_PASS);
				SET(R_CHECK_CH376_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_CH376_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_CH376;
		}
#else
		SET(R_CHECK_CH376_PASS);
		RES(R_CHECK_CH376_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_DK25L;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_DK25L){//NFC模块自检步骤
#if CONFIG_SPLC_USING_DK25L == 1
		T100MS(T100MS_CHECK_DK25L_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_DK25L_DELAY)){
			T100MS(T100MS_CHECK_DK25L_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			if(LDB(SPCOIL_DK25L_INIT_FAIL)){
				SET(R_CHECK_DK25L_PASS);
				RES(R_CHECK_DK25L_FAIL);			
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PN7150B0HN_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 42);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_NRF24L01;
			}
			else{
				RES(R_CHECK_DK25L_PASS);
				SET(R_CHECK_DK25L_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PN7150B0HN_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_DK25L;
		}
#else
		SET(R_CHECK_DK25L_PASS);
		RES(R_CHECK_DK25L_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_NRF24L01;
#endif
		return;
	}	
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_NRF24L01){//
#if CONFIG_SPLC_USING_NRF24L01 == 1
		T100MS(T100MS_CHECK_NRF24L01_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_NRF24L01_DELAY)){
			T100MS(T100MS_CHECK_NRF24L01_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_NRF24L01_DONE);
			if(LDB(SPCOIL_NRF24L01_INIT_FAIL)){
				SET(R_CHECK_NRF24L01_PASS);
				RES(R_CHECK_NRF24L01_FAIL);				
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_NRF24L01_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 48);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_TEMPERATURE;	
			}
			else{
				RES(R_CHECK_NRF24L01_PASS);
				SET(R_CHECK_NRF24L01_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_NRF24L01_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}	
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_NRF24L01;
		}
#else
		SET(R_CHECK_NRF24L01_PASS);
		RES(R_CHECK_NRF24L01_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_TEMPERATURE;
#endif
		return;
	}	
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_TEMPERATURE){//温度自检步骤
		T100MS(T100MS_CHECK_TEMPERATURE_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_TEMPERATURE_DELAY)){
			T100MS(T100MS_CHECK_TEMPERATURE_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_TEMPERATURE_DONE);
			if(LDB(R_DIODE_TEMP_HIGH_0) || LDB(R_DIODE_TEMP_HIGH_1) || LDB(R_DRIVE_TEMP_HIGH) || LDB(R_ENVI_TEMP_HIGH)){
				SET(R_CHECK_TEMPERATURE_PASS);
				RES(R_CHECK_TEMPERATURE_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_TEMPERATURE_PASS);		
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 54);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_LASER_DRIVER;
			}
			else{
				RES(R_CHECK_TEMPERATURE_PASS);
				SET(R_CHECK_TEMPERATURE_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_TEMPERATURE_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;//EPROM自检失败
			}
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_TEMPERATURE;
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_LASER_DRIVER){//激光驱动器自检步骤
		T100MS(T100MS_CHECK_LASER_DRIVER_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_LASER_DRIVER_DELAY)){
			T100MS(T100MS_CHECK_LASER_DRIVER_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_LASER_DRIVER_DONE);
			if(LDB(SPCOIL_LASER_DRIVER_INIT_FAIL)){
				SET(R_CHECK_LASER_DRIVER_PASS);
				RES(R_CHECK_LASER_DRIVER_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_LASER_DRIVER_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 60);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_WIRELESS_FOOTCONTROL;
			}
			else{
				SET(R_CHECK_LASER_DRIVER_PASS);
				RES(R_CHECK_LASER_DRIVER_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_LASER_DRIVER_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;
			}
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_LASER_DRIVER;
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_WIRELESS_FOOTCONTROL){//无线脚踏自检
#if CONFIG_SPLC_USING_WIRELESS_FOOTCONTROL == 1
		T100MS(T100MS_CHECK_WIRELESS_FOOTCONTROL_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_WIRELESS_FOOTCONTROL_DELAY)){
			T100MS(T100MS_CHECK_WIRELESS_FOOTCONTROL_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_WIRELESS_FOOTCONTROL_DONE);
			if(LDB(SPCOIL_WIRELESS_FOOTCONTROL_INIT_FAIL)){
				SET(R_CHECK_WIRELESS_FOOTCONTROL_PASS);
				RES(R_CHECK_WIRELESS_FOOTCONTROL_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_WIRELESS_FOOTCONTROL_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 84);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_PROBATION;
			}
			else{
				RES(R_CHECK_WIRELESS_FOOTCONTROL_PASS);
				SET(R_CHECK_WIRELESS_FOOTCONTROL_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_WIRELESS_FOOTCONTROL_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;
			}
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_WIRELESS_FOOTCONTROL;
		}
#else
		SET(R_CHECK_WIRELESS_FOOTCONTROL_PASS);
		RES(R_CHECK_WIRELESS_FOOTCONTROL_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_PROBATION;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_PROBATION){//试用期检测
#if CONFIG_SPLC_USING_ROBATION == 1
		T100MS(T100MS_CHECK_PROBATION_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_CHECK_PROBATION_DELAY)){
			T100MS(T100MS_CHECK_PROBATION_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			SET(R_CHECK_PROBATION_DONE);
			if(LDB(SPCOIL_PROBATION_INIT_FAIL)){
				SET(R_CHECK_PROBATION_PASS);
				RES(R_CHECK_PROBATION_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROBATION_PASS);
				SetProgressValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_PROGRESS_CHECK_INFO, 100);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_WAIT_ENTER_PASSCODE;
			}
			else{
				RES(R_CHECK_PROBATION_PASS);
				SET(R_CHECK_PROBATION_FAIL);
				SetTextValue(GDDC_PAGE_POWERUP_0, GDDC_PAGE_POWERUP_TEXTDISPLAY_CHECK_INFO, LANG_CHECK_DISPLAY_PROBATION_FAIL);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_FAIL_DISPLAY;
			}
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_CHECK_PROBATION;
		}
#else
		SET(R_CHECK_PROBATION_PASS);
		RES(R_CHECK_PROBATION_FAIL);
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_WAIT_ENTER_PASSCODE;
#endif
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_CHECK_FAIL_DISPLAY){//自检错误显示
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_WAIT_ENTER_PASSCODE){//等待开机密码输入
		T100MS(T100MS_ENTER_PASSCODE_DELAY, true, CONFIG_CHECK_DELAY_TIME);
		if(LD(T_100MS_START * 16 + T100MS_ENTER_PASSCODE_DELAY)){
			T100MS(T100MS_ENTER_PASSCODE_DELAY, false, CONFIG_CHECK_DELAY_TIME);
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_INPUT;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_PASSCODE_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_WAIT_ENTER_PASSCODE;
		}
		return;
	}
	
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_PASSCODE_INPUT){//输入开机密码
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_PASSCODE_NEW0){//等待输入新密码
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_STANDBY){//待机状态机
		switch(NVRAM0[EM_LASER_PULSE_MODE]){
			case LASER_MODE_SP:{
				if(LD(R_STANDBY_KEY_POSWIDTH_ADD_DOWN)){//正脉宽加按键
					T10MS(T10MS_POSWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_SP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH)){
							ADDS1(EM_LASER_SP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_SP_POSWIDTH], 1, 0);
						}
					}
				}		
				if(LD(R_STANDBY_KEY_POSWIDTH_DEC_DOWN)){//正脉宽减按键
					T10MS(T10MS_POSWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_SP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH)){
							DECS1(EM_LASER_SP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_SP_POSWIDTH], 1, 0);
						}
					}
				}
				break;
			}
			case LASER_MODE_MP:{
				if(LD(R_STANDBY_KEY_POSWIDTH_ADD_DOWN)){//正脉宽加按键
					T10MS(T10MS_POSWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_MP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH)){
							ADDS1(EM_LASER_MP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_MP_POSWIDTH], 1, 0);
						}
					}
				}				
				if(LD(R_STANDBY_KEY_POSWIDTH_DEC_DOWN)){//正脉宽减按键
					T10MS(T10MS_POSWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_MP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH)){
							DECS1(EM_LASER_MP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_MP_POSWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN)){//负脉宽加按键
					T10MS(T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_MP_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH)){
							ADDS1(EM_LASER_MP_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_MP_NEGWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN)){//负脉宽减按键
					T10MS(T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_MP_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH)){
							DECS1(EM_LASER_MP_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_MP_NEGWIDTH], 1, 0);
						}
					}
				}
				break;
			}
			case LASER_MODE_GP:{
				if(LD(R_STANDBY_KEY_POSWIDTH_ADD_DOWN)){//正脉宽加按键
					T10MS(T10MS_POSWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH)){
							ADDS1(EM_LASER_GP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_GP_POSWIDTH], 1, 0);
						}
					}
				}				
				if(LD(R_STANDBY_KEY_POSWIDTH_DEC_DOWN)){//正脉宽减按键
					T10MS(T10MS_POSWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH)){
							DECS1(EM_LASER_GP_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_GP_POSWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN)){//负脉宽加按键
					T10MS(T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH)){
							ADDS1(EM_LASER_GP_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_GP_NEGWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN)){//负脉宽减按键
					T10MS(T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH)){
							DECS1(EM_LASER_GP_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_GP_NEGWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_TIMES_ADD_DOWN)){//脉冲数加按键
					T10MS(T10MS_TIMES_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_TIMES_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_TIMES] < CONFIG_MAX_LASER_TIMES)){
							ADDS1(EM_LASER_GP_TIMES);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TIMES, NVRAM0[EM_LASER_GP_TIMES], 1, 0);	
						}
					}
				}
				if(LD(R_STANDBY_KEY_TIMES_DEC_DOWN)){//脉冲数减按键
					T10MS(T10MS_TIMES_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_TIMES_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_TIMES] > CONFIG_MIN_LASER_TIMES)){
							DECS1(EM_LASER_GP_TIMES);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TIMES, NVRAM0[EM_LASER_GP_TIMES], 1, 0);	
						}
					}
				}
				if(LD(R_STANDBY_KEY_GROUP_OFF_ADD_DOWN)){//脉冲间隔加按键
					T10MS(T10MS_GROUP_OFF_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_GROUP_OFF_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_GROUP_OFF] < CONFIG_MAX_LASER_GROUP_OFF)){
							ADDS1(EM_LASER_GP_GROUP_OFF);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_GROUP_OFF, NVRAM0[EM_LASER_GP_GROUP_OFF], 1, 0);	
						}
					}
				}
				if(LD(R_STANDBY_KEY_GROUP_OFF_DEC_DOWN)){//脉冲间隔减按键
					T10MS(T10MS_GROUP_OFF_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_GROUP_OFF_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_GP_GROUP_OFF] > CONFIG_MIN_LASER_GROUP_OFF)){
							DECS1(EM_LASER_GP_GROUP_OFF);
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_GROUP_OFF, NVRAM0[EM_LASER_GP_GROUP_OFF], 1, 0);	
						}
					}
				}
				break;
			}
			case LASER_MODE_DERMA:{
				if(LD(R_STANDBY_KEY_POSWIDTH_ADD_DOWN)){//正脉宽加按键
					T10MS(T10MS_POSWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_DERMA_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH)){
							ADDS1(EM_LASER_DERMA_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_DERMA_POSWIDTH], 1, 0);
						}
					}
				}				
				if(LD(R_STANDBY_KEY_POSWIDTH_DEC_DOWN)){//正脉宽减按键
					T10MS(T10MS_POSWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_POSWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_DERMA_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH)){
							DECS1(EM_LASER_DERMA_POSWIDTH);	
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POSWIDTH, NVRAM0[EM_LASER_DERMA_POSWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN)){//负脉宽加按键
					T10MS(T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_DERMA_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH)){
							ADDS1(EM_LASER_DERMA_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_DERMA_NEGWIDTH], 1, 0);
						}
					}
				}
				if(LD(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN)){//负脉宽减按键
					T10MS(T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_DERMA_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH)){
							DECS1(EM_LASER_DERMA_NEGWIDTH);
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NEGWIDTH, NVRAM0[EM_LASER_DERMA_NEGWIDTH], 1, 0);
						}
					}
				}
				break;
			}
			case LASER_MODE_SIGNAL:{
				if(LD(R_STANDBY_KEY_ENERGY_INTERVAL_ADD_DOWN)){//能量间隔加按键
					T10MS(T10MS_ENERGY_INTERVAL_ADD_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_ENERGY_INTERVAL_ADD_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] < CONFIG_MAX_LASER_ENERGY_INTERVAL)){
							if(NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] < CONFIG_MAX_LASER_ENERGY_INTERVAL){
								NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] += 100;
							}
							SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY_INTERVAL ,NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL], 1, 0);	
						}
					}
				}
				if(LD(R_STANDBY_KEY_ENERGY_INTERVAL_DEC_DOWN)){//能量间隔减按键
					T10MS(T10MS_ENERGY_INTERVAL_DEC_KEYDOWN_DELAY, true, CONFIG_KEY_REPEAT_DELAY_TIME);
					if(LD(T_10MS_START * 16 + T10MS_ENERGY_INTERVAL_DEC_KEYDOWN_DELAY)){	
						if(LDP(SPCOIL_PS10MS) && (NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] > CONFIG_MIN_LASER_GROUP_OFF)){
							if(NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] > CONFIG_MIN_LASER_ENERGY_INTERVAL){
								NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] -= 100;
							}
							SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY_INTERVAL ,NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL], 1, 0);	
						}
					}
				}				
				break;
			}
			default:break;
		}
		if(LD(R_STANDBY_KEY_POSWIDTH_ADD_UP)){
			T10MS(T10MS_POSWIDTH_ADD_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(LD(R_STANDBY_KEY_POSWIDTH_ADD_UP));
		}
		if(LD(R_STANDBY_KEY_POSWIDTH_DEC_UP)){
			T10MS(T10MS_POSWIDTH_DEC_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_POSWIDTH_DEC_UP);
		}
		if(LD(R_STANDBY_KEY_NEGWIDTH_ADD_UP)){
			T10MS(T10MS_NEGWIDTH_ADD_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
		}
		if(LD(R_STANDBY_KEY_NEGWIDTH_DEC_UP)){
			T10MS(T10MS_NEGWIDTH_DEC_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
		}
		if(LD(R_STANDBY_KEY_TIMES_ADD_UP)){
			T10MS(T10MS_TIMES_ADD_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_TIMES_ADD_UP);
		}
		if(LD(R_STANDBY_KEY_TIMES_DEC_UP)){
			T10MS(T10MS_TIMES_DEC_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_TIMES_DEC_UP);
		}	
		if(LD(R_STANDBY_KEY_GROUP_OFF_ADD_UP)){
			T10MS(T10MS_GROUP_OFF_ADD_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_GROUP_OFF_ADD_UP);
		}
		if(LD(R_STANDBY_KEY_GROUP_OFF_DEC_UP)){
			T10MS(T10MS_GROUP_OFF_DEC_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_GROUP_OFF_DEC_UP);
		}
		if(LD(R_STANDBY_KEY_ENERGY_INTERVAL_ADD_UP)){
			T10MS(T10MS_ENERGY_INTERVAL_ADD_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_ENERGY_INTERVAL_ADD_UP);
		}
		if(LD(R_STANDBY_KEY_ENERGY_INTERVAL_DEC_DOWN)){
			T10MS(T10MS_ENERGY_INTERVAL_DEC_KEYDOWN_DELAY, false, CONFIG_KEY_REPEAT_DELAY_TIME);
			RES(R_STANDBY_KEY_ENERGY_INTERVAL_DEC_DOWN);
		}
		if(LD(R_STANDBY_KEY_ENTER_OPTION_DOWN)){//点击OPTION
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_OPTION;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_OPTION_0;
			updateOptionDisplay();
			SetScreen(NVRAM0[EM_DC_PAGE]);
			RES(R_STANDBY_KEY_ENTER_OPTION_DOWN);
		}
		//刷新故障显示
		switch(NVRAM0[EM_LASER_PULSE_MODE]){
			case LASER_MODE_CW:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}
				break;
			}
			case LASER_MODE_SP:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}
				break;				
			}
			case LASER_MODE_MP:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}
			}
			case LASER_MODE_GP:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}			
			}
			case LASER_MODE_DERMA:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}
			}
			case LASER_MODE_SIGNAL:{
				if(LDP(X_INTERLOCK)){//安全连锁拔出
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_INTERLOCK_UNPLUG);
				}
				else if(LDP(X_FOOTSWITCH_NC)){//脚踏拔出
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_FOOTSWITCH_UNPLUG);
				}
				else if(LDP(X_FBD0)){//光纤拔出
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_UNPLUG);
				}
				else if(LDP(R_FIBER_ID_PASS_0)){//光纤ID不匹配
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_FIBER_MISSMATE);
				}
				else if(LDP(R_DIODE_TEMP_HIGH_0)){//激光器高温保护
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_DIODE0_HTEMP);
				}
				else if(LDP(R_ENVI_TEMP_HIGH)){//环境高温保护
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_ENVI_HTEMP);
				}
				else if(LDP(R_DRIVE_TEMP_HIGH)){//驱动器过热
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_DRIVE_HTEMP);
				}
				if(LDN(R_FAULT)){
					RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
					RES(Y_LED_ALARM);
					SetTextValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_WARN, LANG_WARN_MSG_NO_ERROR);
				}				
			} 
			default:break;
		}

		if(LDP(R_FAULT)){
			SET(Y_LED_ALARM);//报警灯
			NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_3;
			NVRAM0[SPREG_BEEM_FREQ] = BEEM_FREQ_0;
			NVRAM0[SPREG_BEEM_VOLUME] = NVRAM0[DM_BEEM_VOLUME];
			SET(SPCOIL_BEEM_ENABLE);//打开蜂鸣器	//打开故障警示蜂鸣器
		}
		if(LD(R_STANDBY_KEY_STNADBY_DOWN)){//点击READY			
			if(LDB(R_FAULT)){
				standbyTouchEnable(false);
				SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_STANDBY, false);
				SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_STANDBY, false);
				SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_STANDBY, false);
				SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_STANDBY, false);
				SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_STANDBY, false);
				SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_STANDBY, false);
				NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_0;
				NVRAM0[SPREG_BEEM_FREQ] = BEEM_FREQ_0;
				NVRAM0[SPREG_BEEM_VOLUME] = NVRAM0[DM_BEEM_VOLUME];
				SET(SPCOIL_BEEM_ENABLE);//打开蜂鸣器

				//打开指示激光
				NVRAM0[SPREG_AIM0_BRIGHTNESS] = NVRAM0[DM_AIM_BRG];
				SET(SPCOIL_AIM0_ENABLE);	
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_READY_LOAD_PARA;	
			}
			else{
				standbyTouchEnable(true);
			}
			RES(R_STANDBY_KEY_STNADBY_DOWN);
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_READY_LOAD_PARA){//将发射参数载入运行寄存器并打开蜂鸣器
		NVRAM0[SPREG_LASER_SELECT] = NVRAM0[EM_LASER_SELECT];
		NVRAM0[SPREG_LASER_MODE] = NVRAM0[EM_LASER_PULSE_MODE];
		switch(NVRAM0[SPREG_LASER_MODE]){
			case LASER_MODE_SP:{
				NVRAM0[SPREG_LASER_TMATE] 			= NVRAM0[EM_LASER_SP_POSWIDTH];//激光脉冲正脉宽 10mS
				break;
			}
			case LASER_MODE_MP:{
				NVRAM0[SPREG_LASER_TMATE] 			= NVRAM0[EM_LASER_MP_POSWIDTH];//激光脉冲正脉宽 10mS
				NVRAM0[SPREG_LASER_TOVERTIME] 		= NVRAM0[EM_LASER_MP_POSWIDTH] + NVRAM0[EM_LASER_MP_NEGWIDTH];//激光脉冲周期 25mS
				break;
			}
			case LASER_MODE_GP:{
				NVRAM0[SPREG_LASER_TMATE] 			= NVRAM0[EM_LASER_GP_POSWIDTH];//激光脉冲正脉宽 10mS
				NVRAM0[SPREG_LASER_TOVERTIME] 		= NVRAM0[EM_LASER_GP_POSWIDTH] + NVRAM0[EM_LASER_GP_NEGWIDTH];//激光脉冲周期 25mS
				NVRAM0[SPREG_LASER_PMATE] 			= NVRAM0[EM_LASER_GP_TIMES];//10个脉冲
				NVRAM0[SPREG_LASER_POVERTIME] 		= NVRAM0[EM_LASER_GP_GROUP_OFF];//间隔33mS
				break;
			}
			case LASER_MODE_DERMA:{
				NVRAM0[SPREG_LASER_TMATE] 			= NVRAM0[EM_LASER_DERMA_POSWIDTH];//激光脉冲正脉宽 10mS
				NVRAM0[SPREG_LASER_TOVERTIME] 		= NVRAM0[EM_LASER_DERMA_POSWIDTH] + NVRAM0[EM_LASER_DERMA_NEGWIDTH];//激光脉冲周期 25mS
				break;
			}
		}
#if CONFIG_USING_BACKGROUND_APP == 1
		PCLAR0(SPREG_LASER_CURRENT_0, SPREG_DAC_0);//功率->DAC CODE
		PCLAR1(SPREG_LASER_CURRENT_1, SPREG_DAC_1);//功率->DAC CODE
#endif
		T100MS(T100MS_READY_BEEM_DELAY, true, 10);//启动计时器延时500mS//打开计时器
		//清空计时器
		if(LD(T_100MS_START * 16 + T100MS_READY_BEEM_DELAY)){
			T100MS(T100MS_READY_BEEM_DELAY, false, 3);
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_READY_LOAD_DONE;
		}
		else{
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_READY_LOAD_PARA;
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_READY_LOAD_DONE){//参数载入完毕并停止蜂鸣器
		RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器
		NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_LASER_WAIT_TRIGGER;
		SetControlEnable(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_STANDBY, true);
		SetControlEnable(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_STANDBY, true);
		SetControlEnable(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_STANDBY, true);
		SetControlEnable(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_STANDBY, true);
		SetControlEnable(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_STANDBY, true);
		SetControlEnable(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_STANDBY, true);
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_LASER_WAIT_TRIGGER){//等待触发激光
		if(LD(R_FAULT)){
			EDLAR();//停止发射
			RES(SPCOIL_AIM0_ENABLE);
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
			standbyTouchEnable(true);
		}
		else if(LD(R_STANDBY_KEY_STNADBY_UP)){//回到等待状态
			EDLAR();//停止发射
			RES(SPCOIL_AIM0_ENABLE);			
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
			standbyTouchEnable(true);
			RES(R_STANDBY_KEY_STNADBY_UP);
		}
		else if(LD(MR_FOOSWITCH_HAND_SWITCH)){//上升沿触发
			if(LDP(X_FOOTSWITCH_NO)){//发射激光
				//选择蜂鸣器模式
				if((NVRAM0[DM_BEEM_MODE] == BEEM_MODE_SYNC) || (NVRAM0[EM_LASER_PULSE_MODE] == LASER_MODE_SIGNAL)){
					NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_1;	
				}
				else{
					NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_2;
				}
				NVRAM0[SPREG_BEEM_FREQ] = BEEM_FREQ_0;
				NVRAM0[SPREG_BEEM_VOLUME] = NVRAM0[DM_BEEM_VOLUME];
				SET(SPCOIL_BEEM_ENABLE);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_LASER_EMITING;				
				STLAR();
			}
		}
		else{//电平触发
			if(LD(X_FOOTSWITCH_NO)){//发射激光			
				if((NVRAM0[DM_BEEM_MODE] == BEEM_MODE_SYNC) || (NVRAM0[EM_LASER_PULSE_MODE] == LASER_MODE_SIGNAL)){
					NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_1;	
				}
				else{
					NVRAM0[SPREG_BEEM_MODE] = BEEM_MODE_2;
				}
				NVRAM0[SPREG_BEEM_FREQ] = BEEM_FREQ_0;
				NVRAM0[SPREG_BEEM_VOLUME] = NVRAM0[DM_BEEM_VOLUME];
				SET(SPCOIL_BEEM_ENABLE);
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_LASER_EMITING;				
				STLAR();
			}	
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_LASER_EMITING){//发激光中
		NVRAM0[TM_START] = (NVRAM0[EM_TOTAL_POWER] / 10);
		MULTS16(EM_RELEASE_TOTAL_TIME, TM_START, EM_RELEASE_TOTAL_TIME);//计算发射能量
		if(LD(R_FAULT)){//发现故障
			EDLAR();
			RES(SPCOIL_AIM0_ENABLE);
			RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器			
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
			standbyTouchEnable(true);
			SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_STANDBY, false);
			SetButtonValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_KEY_STANDBY, false);
			SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_STANDBY, false);
			SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_STANDBY, false);
			SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_STANDBY, false);
			SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_STANDBY, false);
		}
		else if(LD(MR_FOOSWITCH_HAND_SWITCH)){//上升沿触发
			if(LDP(X_FOOTSWITCH_NO)){//关闭激光
				EDLAR();
				RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器	
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_LASER_WAIT_TRIGGER;
			}
		}
		else{
			if(LDB(X_FOOTSWITCH_NO)){//关闭激光
				EDLAR();
				RES(SPCOIL_BEEM_ENABLE);//关闭蜂鸣器	
				NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_LASER_WAIT_TRIGGER;
			}
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_OPTION){//选项界面
		if(LD(R_OPTION_KEY_ENTER_INFORMATION_DOWN)){
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_INFORMATION;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_INFORMATION_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
			RES(R_OPTION_KEY_ENTER_INFORMATION_DOWN);
		}
		if(LD(R_OPTION_KEY_ENTER_OK_DOWN)){
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
			updateStandbyDisplay();
			RES(R_OPTION_KEY_ENTER_OK_DOWN);
		}
		if(LD(R_OPTION_KEY_ENTER_DIAGNOSIS_DOWN)){//进入诊断状态
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_DIAGNOSIS;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_DIAGNOSIS_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
			RES(R_OPTION_KEY_ENTER_DIAGNOSIS_DOWN);
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_INFORMATION){//信息界面
		if(LD(R_INFORMATION_KEY_OK_DOWN)){
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_OPTION;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_OPTION_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
			RES(R_INFORMATION_KEY_OK_DOWN);	
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_SCHEME){//方案界面
		if(LD(R_SCHEME_KEY_ENTER_STANDBY_DOWN)){
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_OPTION;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_OPTION_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
			NVRAM0[DM_SCHEME_NUM] = NVRAM0[EM_SCHEME_NUM_TMP];
			loadScheme();
			updateStandbyDisplay();
			RES(R_SCHEME_KEY_ENTER_STANDBY_DOWN);
		}
		return;
	}
	if(NVRAM0[EM_HMI_OPERA_STEP] == FSMSTEP_DIAGNOSIS){//诊断界面
		if(LD(R_DIAGNOSIS_OK_DOWN)){//返回Option
			NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_OPTION;
			NVRAM0[EM_DC_PAGE] = GDDC_PAGE_OPTION_0;
			SetScreen(NVRAM0[EM_DC_PAGE]);
			RES(R_DIAGNOSIS_OK_DOWN);
		}
		else{
			if(LDP(SPCOIL_PS1000MS)){
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_INTERLOCK , LD(X_INTERLOCK), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_ESTOP , LD(X_ESTOP), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_FOOTSWITCH_NO , LD(X_FOOTSWITCH_NO), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_FOOTSWITCH_NC , LD(X_FOOTSWITCH_NC), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_LDR_FAULT0 , LD(X_LDR_FAULT0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_LDR_FAULT1 , LD(X_LDR_FAULT1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_FBD0 , LD(X_FBD0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_X_FBD1 , LD(X_FBD1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_LED_POWERON , LD(Y_LED_POWERON), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_LED_EMIT , LD(Y_LED_EMIT), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_LED_ALARM , LD(Y_LED_ALARM), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y3 , LD(Y_OUT3), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y4 , LD(Y_OUT4), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y5 , LD(Y_OUT5), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y6 , LD(Y_OUT6), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y7 , LD(Y_OUT7), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_FAN0 , LD(Y_FAN0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_FAN1 , LD(Y_FAN1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_TEC0 , LD(Y_TEC0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_Y_TEC1 , LD(Y_TEC1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_OUT0 , LD(SPCOIL_SPWM_OUT_0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_OUT1 , LD(SPCOIL_SPWM_OUT_1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_OUT2 , LD(SPCOIL_SPWM_OUT_2), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_OUT3 , LD(SPCOIL_SPWM_OUT_3), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_RESET0 , LD(SPCOIL_SPWM_RESET_0), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_RESET1 , LD(SPCOIL_SPWM_RESET_1), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_RESET2 , LD(SPCOIL_SPWM_RESET_2), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_RESET3 , LD(SPCOIL_SPWM_RESET_3), 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC0 , NVRAM0[SPREG_ADC_0], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC1 , NVRAM0[SPREG_ADC_1], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC2 , NVRAM0[SPREG_ADC_2], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC3 , NVRAM0[SPREG_ADC_3], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC4 , NVRAM0[SPREG_ADC_4], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC5 , NVRAM0[SPREG_ADC_5], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC6 , NVRAM0[SPREG_ADC_6], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC7 , NVRAM0[SPREG_ADC_7], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_ADC8 , NVRAM0[SPREG_ADC_8], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_DAC0 , NVRAM0[SPREG_DAC_0], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_DAC1 , NVRAM0[SPREG_DAC_1], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_POS0 , NVRAM0[SPREG_SPWM_POS_0], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_POS1 , NVRAM0[SPREG_SPWM_POS_1], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_POS2 , NVRAM0[SPREG_SPWM_POS_2], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_POS3 , NVRAM0[SPREG_SPWM_POS_3], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_CYCLE0 , NVRAM0[SPREG_SPWM_CYCLE_0], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_CYCLE1 , NVRAM0[SPREG_SPWM_CYCLE_1], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_CYCLE2 , NVRAM0[SPREG_SPWM_CYCLE_2], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_SPWM_CYCLE3 , NVRAM0[SPREG_SPWM_CYCLE_3], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_DT0 , NVRAM0[EM_DIODE_TEMP0], 1, 0);
				SetTextInt32(GDDC_PAGE_DIAGNOSIS_0, GDDC_PAGE_DIAGNOSIS_TEXTDISPLAY_DT1 , NVRAM0[EM_DIODE_TEMP1], 1, 0);
			}
		}
		return;
	}
}

//消息处理流程
//msg 待处理消息
//size 消息长度
void ProcessMessage( PCTRL_MSG msg, uint16_t size ){
	uint8_t cmd_type = msg->cmd_type;                                                     //指令类型
    uint8_t ctrl_msg = msg->ctrl_msg;                                                     //消息的类型
    uint8_t control_type = msg->control_type;                                             //控件类型
    uint16_t screen_id = PTR2U16(&msg->screen_id);                                        //画面ID
    uint16_t control_id = PTR2U16(&msg->control_id);                                      //控件ID
    uint32_t value = PTR2U32(msg->param);                                                 //数值
    switch(cmd_type){  
		case NOTIFY_TOUCH_PRESS:{//触摸屏按下
			break;
		}
		case NOTIFY_TOUCH_RELEASE:{//触摸屏松开
			NotifyTouchXY(hmiCmdBuffer[1],PTR2U16(hmiCmdBuffer + 2),PTR2U16(hmiCmdBuffer + 4)); 
			break;
		}			
		case NOTIFY_WRITE_FLASH_OK:{//写FLASH成功
			NotifyWriteFlash(1);                                                      
			break;              
		}			
		case NOTIFY_WRITE_FLASH_FAILD:{//写FLASH失败
			NotifyWriteFlash(0);                        	                              
			break;            
		}			
		case NOTIFY_READ_FLASH_OK:{//读取FLASH成功
			NotifyReadFlash(1, hmiCmdBuffer + 2, size - 6);//去除帧头帧尾
			break;                                  
		}			
		case NOTIFY_READ_FLASH_FAILD:{//读取FLASH失败
			NotifyReadFlash(0,0,0);                                                   
			break;  
		}			
		case NOTIFY_READ_RTC:{//读取RTC时间
			NotifyReadRTC(hmiCmdBuffer[2], hmiCmdBuffer[3], hmiCmdBuffer[4], hmiCmdBuffer[5], hmiCmdBuffer[6], hmiCmdBuffer[7], hmiCmdBuffer[8]);
			break;
		}
		case NOTIFY_CONTROL:{
			if(ctrl_msg==MSG_GET_CURRENT_SCREEN){//画面ID变化通知
                NotifyScreen(screen_id);//画面切换调动的函数
            }
            else{
				switch(control_type){
					case kCtrlButton:{//按钮控件
						NotifyButton(screen_id,control_id,msg->param[1]);                  
						break;  
					}
					case kCtrlText:{//文本控件
						NotifyText(screen_id,control_id,msg->param);                       
						break;
					}						
					case kCtrlProgress:{//进度条控件
						NotifyProgress(screen_id,control_id,value);                        
						break;
					}						
					case kCtrlSlider:{//滑动条控件
						NotifySlider(screen_id,control_id,value);                          
						break;
					}						
					case kCtrlMeter:{//仪表控件
						NotifyMeter(screen_id,control_id,value);                           
						break;
					}
					case kCtrlMenu:{//菜单控件
						NotifyMenu(screen_id,control_id,msg->param[0],msg->param[1]);      
						break;
					}
					case kCtrlSelector:{//选择控件
						NotifySelector(screen_id,control_id,msg->param[0]);                
						break;
					}						
					case kCtrlRTC:{//倒计时控件
						NotifyTimer(screen_id,control_id);
						break;
					}
					default:{
						break;
					}
				}
            } 
            break;  
        } 
    case NOTIFY_HandShake:
        //NOTIFYHandShake();
        break;
    default:
        break;
    }
}
//按钮控件通知当按钮状态改变(或调用GetControlValue)时，执行此函数
//screen_id 画面ID;control_id 控件ID;state 按钮状态：0弹起，1按下
void NotifyButton(uint16_t screen_id, uint16_t control_id, uint8_t state){ 
	//PASSCODE 密码输入页面
	switch(screen_id){
		case GDDC_PAGE_PASSCODE_0:{//等待密码输入
			switch(control_id){
				case GDDC_PAGE_PASSCODE_KEY_NUM1:{//按键1
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3100;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0031;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3100;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0031;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM2:{//按键2
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3200;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0032;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3200;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0032;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM3:{//按键3
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3300;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0033;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3300;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0033;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(screen_id, 15, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));					
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM4:{//按键4
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3400;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0034;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3400;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0034;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));	
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM5:{//按键5
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3500;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0035;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3500;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0035;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM6:{//按键6
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3600;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0036;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3600;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0036;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));		
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM7:{//按键7
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3700;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0037;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3700;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0037;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM8:{//按键8
						if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3800;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0038;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3800;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0038;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM9:{//按键9
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3900;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0039;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3900;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0039;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_NUM0:{//按键0
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3000;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0030;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3000;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0030;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_CANCEL:{//按键CANCEL
					CLR(EM_DC_NEW_PASSCODE0);//清空已输入密码
					CLR(EM_DC_NEW_PASSCODE1);
					CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引
					NVRAM0[EM_DC_PAGE] = GDDC_PAGE_PASSCODE_0;
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_BACKSPACE:{//按键BACKSPACE
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 4){
						NVRAM0[EM_DC_NEW_PASSCODE1] &= 0xFF00;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x3;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] &= 0x00FF;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE0] &= 0xFF00;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x1;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] &= 0x00FF;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x0;	
					}
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_CHANGEPASSCODE:{//按键CHANGEPASSCODE
					if((NVRAM0[EM_DC_NEW_PASSCODE0] == NVRAM0[DM_DC_OLD_PASSCODE0]) && (NVRAM0[EM_DC_NEW_PASSCODE1] == NVRAM0[DM_DC_OLD_PASSCODE1])){
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_NEW0;
						NVRAM0[EM_DC_PAGE] = GDDC_PAGE_NEW_PASSCODE_0;
						SetScreen(NVRAM0[EM_DC_PAGE]);	
					}
					else if((NVRAM0[EM_DC_NEW_PASSCODE0] == NVRAM0[EM_DC_DEFAULT_PASSCODE0]) && (NVRAM0[EM_DC_NEW_PASSCODE1] == NVRAM0[DM_DC_OLD_PASSCODE1])){
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_NEW0;
						NVRAM0[EM_DC_PAGE] = GDDC_PAGE_NEW_PASSCODE_0;
						SetScreen(NVRAM0[EM_DC_PAGE]);
					}
					CLR(EM_DC_NEW_PASSCODE0);//清空已输入密码
					CLR(EM_DC_NEW_PASSCODE1);
					CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引
					SetTextValue(screen_id, 15 , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_PASSCODE_KEY_ENTER:{//按键ENTER
					if((NVRAM0[EM_DC_NEW_PASSCODE0] == NVRAM0[DM_DC_OLD_PASSCODE0]) && (NVRAM0[EM_DC_NEW_PASSCODE1] == NVRAM0[DM_DC_OLD_PASSCODE1])){
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
						updateStandbyDisplay();
						standbyTouchEnable(true);
					}		
					else if((NVRAM0[EM_DC_NEW_PASSCODE0] == NVRAM0[EM_DC_DEFAULT_PASSCODE0]) && (NVRAM0[EM_DC_NEW_PASSCODE1] == NVRAM0[EM_DC_DEFAULT_PASSCODE1])){
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_STANDBY;
						SET(R_ADMIN);//工程师密码登录
						standbyTouchEnable(true);	
						
					}
					CLR(EM_DC_NEW_PASSCODE0);//清空已输入密码
					CLR(EM_DC_NEW_PASSCODE1);
					CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引 
					SetTextValue(screen_id, GDDC_PAGE_PASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_NEW_PASSCODE_0:{//新密码输入页面
			switch(control_id){
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM1:{//按键1
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3100;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0031;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3100;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0031;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM2:{//按键2	
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3200;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0032;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3200;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0032;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM3:{//按键3
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3300;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0033;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3300;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0033;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM4:{//按键4
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3400;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0034;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3400;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0034;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM5:{//按键5
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3500;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0035;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3500;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0035;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM6:{//按键6
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3600;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0036;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3600;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0036;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;	
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM7:{//按键7
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3700;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0037;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3700;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0037;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM8:{//按键8
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3800;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0038;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3800;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0038;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM9:{//按键9
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3900;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0039;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3900;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0039;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));	
					break;	
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_NUM0:{//按键0
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 0){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x3000;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 1;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] |= 0x0030;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x3000;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 3;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] |= 0x0030;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 4;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_CANCEL:{
					CLR(EM_DC_NEW_PASSCODE0);
					CLR(EM_DC_NEW_PASSCODE1);
					CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引 
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;	
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_BACKSPACE:{
					if(NVRAM0[EM_DC_PASSCODE_INDEX] == 4){
						NVRAM0[EM_DC_NEW_PASSCODE1] &= 0xFF00;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x3;
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 3){
						NVRAM0[EM_DC_NEW_PASSCODE1] &= 0x00FF;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x2;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 2){
						NVRAM0[EM_DC_NEW_PASSCODE0] &= 0xFF00;	
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x1;	
					}
					else if(NVRAM0[EM_DC_PASSCODE_INDEX] == 1){
						NVRAM0[EM_DC_NEW_PASSCODE0] &= 0x00FF;
						NVRAM0[EM_DC_PASSCODE_INDEX] = 0x0;	
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_SAVE:{
					if((NVRAM0[EM_DC_PASSCODE_INDEX] >= 4) && (NVRAM0[EM_DC_NEW_PASSCODE0] != 0x0000) && (NVRAM0[EM_DC_NEW_PASSCODE0] != 0x0000)){
						MOV(DM_DC_OLD_PASSCODE0, EM_DC_NEW_PASSCODE0);
						MOV(DM_DC_OLD_PASSCODE1, EM_DC_NEW_PASSCODE1);
						FSAV();//立即更新NVRAM
						CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引 
						CLR(EM_DC_NEW_PASSCODE0);
						CLR(EM_DC_NEW_PASSCODE1);
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_INPUT;
						NVRAM0[EM_DC_PAGE] = GDDC_PAGE_PASSCODE_0;
						SetScreen(NVRAM0[EM_DC_PAGE]);
					}
					else{
						CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引 
						CLR(EM_DC_NEW_PASSCODE0);
						CLR(EM_DC_NEW_PASSCODE1);
						NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_NEW0;
						NVRAM0[EM_DC_PAGE] = GDDC_PAGE_NEW_PASSCODE_0;
					}
					SetTextValue(GDDC_PAGE_NEW_PASSCODE_0, GDDC_PAGE_NEWPASSCODE_TEXTDISPLAY, (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					break;
				}
				case GDDC_PAGE_NEWPASSCODE_KEY_BACK:{//放弃新密码修改
					CLR(EM_DC_NEW_PASSCODE0);
					CLR(EM_DC_NEW_PASSCODE1);
					CLR(EM_DC_PASSCODE_INDEX);//清空密码显示位索引 
					NVRAM0[EM_HMI_OPERA_STEP] = FSMSTEP_PASSCODE_INPUT;
					NVRAM0[EM_DC_PAGE] = GDDC_PAGE_PASSCODE_0;
					SetTextValue(screen_id, GDDC_PAGE_NEWPASSCODE_KEY_BACK , (uint8_t*)(&(NVRAM0[EM_DC_NEW_PASSCODE0])));
					SetScreen(NVRAM0[EM_DC_PAGE]);
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_CW_0:{//主界面STANDBY CW
			switch(control_id){				
				case GDDC_PAGE_STANDBY_CW_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							NVRAM0[EM_LASER_POWER_CH0]++;
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_CW);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_CW);						
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_CW);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_CW);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SCHEME_LAST:{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_STNADBY_UP);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_CW_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_CW_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_SP_0:{//主界面STANDBY SP
			switch(control_id){
				case GDDC_PAGE_STANDBY_SP_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							ADDS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];	
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SP);
							SetProgressValue(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SP);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SP);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SP);
							SetProgressValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_POSWIDTH_ADD:{	
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_SP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH){
							ADDS1(EM_LASER_SP_POSWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_SP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_POSWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_DEC_UP);
			
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_SP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH){
							DECS1(EM_LASER_SP_POSWIDTH);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_SP_0, GDDC_PAGE_STANDBY_SP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_SP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SCHEME_LAST:{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SP_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_CW_0, GDDC_PAGE_STANDBY_CW_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_SP_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_MP_0:{//主界面STANDBY MP
			switch(control_id){				
				case GDDC_PAGE_STANDBY_MP_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							ADDS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_MP);
							SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_MP);
							SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_MP);
							SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_MP);						
							SetProgressValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_POSWIDTH_ADD:{	
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_MP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH){
							ADDS1(EM_LASER_MP_POSWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_MP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_POSWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_DEC_UP);
			
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_MP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH){
							DECS1(EM_LASER_MP_POSWIDTH);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_MP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_NEGWIDTH_ADD:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_MP_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH){
							ADDS1(EM_LASER_MP_NEGWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_MP_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_NEGWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_MP_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH){
							SetTextInt32(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_MP_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SCHEME_LAST:{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_MP_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_MP_0, GDDC_PAGE_STANDBY_MP_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_MP_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_GP_0:{//主界面STANDBY GP
			switch(control_id){				
				case GDDC_PAGE_STANDBY_GP_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							ADDS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_GP);
							SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_GP);						
							SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_GP);
							SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_GP);
							SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_POSWIDTH_ADD:{	
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_GP_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH){
							ADDS1(EM_LASER_GP_POSWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_GP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_POSWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_DEC_UP);
			
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_GP_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH){
							DECS1(EM_LASER_GP_POSWIDTH);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_GP_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_NEGWIDTH_ADD:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_GP_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH){
							ADDS1(EM_LASER_GP_NEGWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_GP_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_NEGWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_GP_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH){
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_GP_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_TIMES_ADD:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_TIMES_ADD_DOWN);
						SET(R_STANDBY_KEY_TIMES_ADD_UP);
					}
					else if(state == 0x01){
						SET(R_STANDBY_KEY_TIMES_ADD_DOWN);
						RES(R_STANDBY_KEY_TIMES_ADD_UP);
						if(NVRAM0[EM_LASER_GP_TIMES] < CONFIG_MAX_LASER_TIMES){
							ADDS1(EM_LASER_GP_TIMES);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TIMES ,NVRAM0[EM_LASER_GP_TIMES], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_TIMES_DEC:{
					if(state == 0x0){
						RES(R_STANDBY_KEY_TIMES_DEC_DOWN);
						SET(R_STANDBY_KEY_TIMES_DEC_UP);
					}
					else if(state == 0x01){
						SET(R_STANDBY_KEY_TIMES_DEC_DOWN);
						RES(R_STANDBY_KEY_TIMES_DEC_UP);
						if(NVRAM0[EM_LASER_GP_TIMES] > CONFIG_MIN_LASER_TIMES){
							DECS1(EM_LASER_GP_TIMES);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_TIMES ,NVRAM0[EM_LASER_GP_TIMES], 1, 0);
						}	
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_GROUP_OFF_ADD:{
					if(state == 0x0){
						RES(R_STANDBY_KEY_GROUP_OFF_ADD_DOWN);
						SET(R_STANDBY_KEY_GROUP_OFF_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_GROUP_OFF_ADD_DOWN);
						RES(R_STANDBY_KEY_GROUP_OFF_ADD_UP);
						if(NVRAM0[EM_LASER_GP_GROUP_OFF] < CONFIG_MAX_LASER_GROUP_OFF){
							ADDS1(EM_LASER_GP_GROUP_OFF);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_GROUP_OFF ,NVRAM0[EM_LASER_GP_GROUP_OFF], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_GROUP_OFF_DEC:{
					if(state == 0x0){//UP
						RES(R_STANDBY_KEY_GROUP_OFF_DEC_DOWN);
						SET(R_STANDBY_KEY_GROUP_OFF_DEC_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_GROUP_OFF_DEC_DOWN);
						RES(R_STANDBY_KEY_GROUP_OFF_DEC_UP);
						if(NVRAM0[EM_LASER_GP_GROUP_OFF] > CONFIG_MIN_LASER_GROUP_OFF){
							DECS1(EM_LASER_GP_GROUP_OFF);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_TEXTDISPLAY_GROUP_OFF ,NVRAM0[EM_LASER_GP_GROUP_OFF], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SCHEME_LAST:{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_GP_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_GP_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_SIGNAL_0:{//主界面STANDBY EVLA SIGNAL
			switch(control_id){				
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							ADDS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SIGNAL);
							SetProgressValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SIGNAL);	
							SetProgressValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SIGNAL);
							SetProgressValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SIGNAL);
							SetProgressValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_ENERGY_INTERVAL_ADD:{
					if(state == 0x01){	
						if(NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] < CONFIG_MAX_LASER_ENERGY_INTERVAL){
							NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] += 100;
						}
						SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY_INTERVAL ,NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL], 1, 0);	
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_ENERGY_INTERVAL_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] > CONFIG_MIN_LASER_ENERGY_INTERVAL){
							NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL] -= 100;
						}
						SetTextInt32(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_TEXTDISPLAY_ENERGY_INTERVAL ,NVRAM0[EM_LASER_SIGNAL_ENERGY_INTERVAL], 1, 0);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_LAST :{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_SIGNAL_0, GDDC_PAGE_STANDBY_SIGNAL_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_GP_0, GDDC_PAGE_STANDBY_GP_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_SIGNAL_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_DERMA_0:{//主界面STNADBY DERMA
			switch(control_id){	
				case GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5:{
					if(state == 0x01){
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, true);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, false);
						NVRAM0[EM_LASER_DERMA_SPOT_SIZE] = DERMA_SPOT_SIZE_0MM5;
					}
					break;
				}			
				case GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0:{
					if(state == 0x01){
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, true);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, false);
						NVRAM0[EM_LASER_DERMA_SPOT_SIZE] = DERMA_SPOT_SIZE_1MM0;
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0:{
					if(state == 0x01){
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, true);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, false);
						NVRAM0[EM_LASER_DERMA_SPOT_SIZE] = DERMA_SPOT_SIZE_2MM0;
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0:{
					if(state == 0x01){
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_0MM5, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_1MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_2MM0, false);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SPOT_3MM0, true);
						NVRAM0[EM_LASER_DERMA_SPOT_SIZE] = DERMA_SPOT_SIZE_3MM0;
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POSWIDTH_ADD:{	
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_DERMA_POSWIDTH] < CONFIG_MAX_LASER_POSWIDTH){
							ADDS1(EM_LASER_DERMA_POSWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_DERMA_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POSWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_POSWIDTH_DEC_UP);
			
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_POSWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_POSWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_DERMA_POSWIDTH] > CONFIG_MIN_LASER_POSWIDTH){
							DECS1(EM_LASER_DERMA_POSWIDTH);//-1
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_POSWIDTH ,NVRAM0[EM_LASER_DERMA_POSWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_NEGWIDTH_ADD:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_ADD_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_ADD_UP);
						if(NVRAM0[EM_LASER_DERMA_NEGWIDTH] < CONFIG_MAX_LASER_NEGWIDTH){
							ADDS1(EM_LASER_DERMA_NEGWIDTH);//+1
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_DERMA_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_NEGWIDTH_DEC:{
					if(state == 0x00){
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
					}
					else if(state == 0x01){//DOWN
						SET(R_STANDBY_KEY_NEGWIDTH_DEC_DOWN);
						RES(R_STANDBY_KEY_NEGWIDTH_DEC_UP);
						if(NVRAM0[EM_LASER_DERMA_NEGWIDTH] > CONFIG_MIN_LASER_NEGWIDTH){
							SetTextInt32(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_TEXTDISPLAY_NEGWIDTH ,NVRAM0[EM_LASER_DERMA_NEGWIDTH], 1, 0);
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH0_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] < CONFIG_MAX_LASERPOWER_CH0){
							ADDS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];					
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_DERMA);
							SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));						
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH0_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH0] > CONFIG_MIN_LASERPOWER_CH0){
							DECS1(EM_LASER_POWER_CH0);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_DERMA);
							SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH0, ((uint32_t)NVRAM0[EM_LASER_POWER_CH0] * 100 / CONFIG_MAX_LASERPOWER_CH0));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH1_ADD:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] < CONFIG_MAX_LASERPOWER_CH1){
							ADDS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_DERMA);
							SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_POWER_CH1_DEC:{
					if(state == 0x01){
						if(NVRAM0[EM_LASER_POWER_CH1] > CONFIG_MIN_LASERPOWER_CH1){
							DECS1(EM_LASER_POWER_CH1);
							NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
							updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_DERMA);
							SetProgressValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH1, ((uint32_t)NVRAM0[EM_LASER_POWER_CH1] * 100 / CONFIG_MAX_LASERPOWER_CH1));
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_SAVE:{
					if(state == 0x01){
						saveScheme();
						FSAV();//立即更新NVRAM
					}
					else if(state == 0x00){
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_LAST :{//选择上一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] > 0){
							DECS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SCHEME_NEXT:{//选择下一个方案
					if(state == 0){
						if(NVRAM0[DM_SCHEME_NUM] < (CONFIG_HMI_SCHEME_NUM - 1)){
							ADDS1(DM_SCHEME_NUM);//+1
							loadScheme();//DM->EM
							FSAV();//立即更新NVRAM
							updateStandbyDisplay();
						}
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_STANDBY:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_STNADBY_DOWN);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH0:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH0;
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH1, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH1:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_CH1;
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_BOTH, 0x00);
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_BOTH:{
					if(state == 0x01){
						NVRAM0[EM_LASER_SELECT] = LASER_SELECT_BOTH;
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH0, 0x00);
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_SELECT_CH1, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_CW:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_CW;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_MP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_MP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_GP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_GP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SP:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SP;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_SIGNAL:{
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_SIGNAL;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_MODE_DERMA:{	
					if(state == 0x01){
						NVRAM0[EM_LASER_PULSE_MODE] = LASER_MODE_DERMA;
						updateStandbyDisplay();
					}
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_KEY_RESET:{
					if(state == 0x01){
						NVRAM0[EM_RELEASE_TOTAL_TIME] = 0;
						NVRAM0[EM_RELEASE_TOTAL_ENERGY] = 0;
						SetButtonValue(GDDC_PAGE_STANDBY_DERMA_0, GDDC_PAGE_STANDBY_DERMA_KEY_RESET, 0x00);
					}
					break;
				}	
				case GDDC_PAGE_STANDBY_DERMA_KEY_ENTER_OPTION:{
					if(state == 0x01){
						SET(R_STANDBY_KEY_ENTER_OPTION_DOWN);
					}
					else if(state == 0x00){
						SET(R_STANDBY_KEY_ENTER_OPTION_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_OPTION_0:{//选项页面
			switch(control_id){
				case GDDC_PAGE_OPTION_KEY_BEEP:{
					if(state == 0x01){
						NVRAM0[DM_BEEM_MODE] = BEEM_MODE_SYNC;
						SetButtonValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_KEY_TONE, 0x0);//TONE按键弹起
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_TONE:{
					if(state == 0x01){
						NVRAM0[DM_BEEM_MODE] = BEEM_MODE_TONE;
						SetButtonValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_KEY_BEEP, 0x0);//BEEP按键弹起
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_AIM_BRG_ADD:{
					if(state == 0x01){
						if(NVRAM0[DM_AIM_BRG] < CONFIG_MAX_AIM_BRG){
							ADDS1(DM_AIM_BRG);//+1	
							SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_AIM_BRG, NVRAM0[DM_AIM_BRG]);//更新进度条
						}
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_AIM_BRG_DEC:{
					if(state == 0x01){
						if(NVRAM0[DM_AIM_BRG] > CONFIG_MIN_AIM_BRG){
							DEC1(DM_AIM_BRG);//-1	
							SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_AIM_BRG, NVRAM0[DM_AIM_BRG]);//更新进度条
						}
					}
					break;					
				}
				case GDDC_PAGE_OPTION_KEY_BEEM_VOLUME_ADD:{
					if(state == 0x01){
						if(NVRAM0[DM_BEEM_VOLUME] > CONFIG_MAX_BEEM_VOLUME){
							ADDS1(DM_BEEM_VOLUME);
							SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_BEEM_VOLUME, NVRAM0[DM_BEEM_VOLUME]);//更新进度条
						}
					}
					break;					
				}
				case GDDC_PAGE_OPTION_KEY_BEEM_VOLUME_DEC:{
					if(state == 0x01){
						if(NVRAM0[DM_BEEM_VOLUME] < CONFIG_MIN_BEEM_VOLUME){
							DECS1(DM_BEEM_VOLUME);
							SetProgressValue(GDDC_PAGE_OPTION_0, GDDC_PAGE_OPTION_PROGRESS_BEEM_VOLUME, NVRAM0[DM_BEEM_VOLUME]);//更新进度条
						}
					}
					break;					
				}
				case GDDC_PAGE_OPTION_KEY_LCD_BRG_ADD:{
					if(state == 0x01){
						if(NVRAM0[DM_LCD_BRG] < CONFIG_MAX_LCD_BRG){
							ADDS1(DM_LCD_BRG);
							SetBackLight((uint8_t)(NVRAM0[DM_LCD_BRG] * 255 / 100));
						}
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_LCD_BRG_DEC:{
					if(state == 0x01){
						if(NVRAM0[DM_LCD_BRG] > CONFIG_MIN_LCD_BRG){
							DECS1(DM_LCD_BRG);
							SetBackLight((uint8_t)(NVRAM0[DM_LCD_BRG] * 255 / 100));
						}
					}
					break;					
				}
				case GDDC_PAGE_OPTION_KEY_ENTER_INFORMATION:{//信息
					if(state == 0x01){
						SET(R_OPTION_KEY_ENTER_INFORMATION_DOWN);
					}
					else if(state == 0x00){
						SET(R_OPTION_KEY_ENTER_INFORMATION_UP);
					}
					break;							
				}
				case GDDC_PAGE_OPTION_KEY_ENTER_CORRECTION:{//功率校正
					if(state == 0x01){
						SET(R_OPTION_KEY_ENTER_CORRECTION_DOWN);
					}
					else if(state == 0x00){
						RES(R_OPTION_KEY_ENTER_CORRECTION_UP);
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_ENTER_OK:{//OK
					if(state == 0x01){
						SET(R_OPTION_KEY_ENTER_OK_DOWN);
					}
					else if(state == 0x00){
						RES(R_OPTION_KEY_ENTER_OK_UP);
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_HAND_SWITCH_ON:{
					if(state == 0x01){
						SET(MR_FOOSWITCH_HAND_SWITCH);
					}
					break;
				}
				case GDDC_PAGE_OPTION_KEY_ENTER_DIAGNOSIS:{
					if(state == 0x01){
						SET(R_OPTION_KEY_ENTER_DIAGNOSIS_DOWN);
					}
					if(state == 0x00){
						SET(R_OPTION_KEY_ENTER_DIAGNOSIS_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_INFORMATION_0:{
			switch(control_id){
				case GDDC_PAGE_INFORMATION_KEY_ENTER_OK:{
					if(state == 0x1){
						SET(R_INFORMATION_KEY_OK_DOWN);
					}
					else if(state == 0x0){
						SET(R_INFORMATION_KEY_OK_UP);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_SCHEME_0:{
			switch(control_id){
				case GDDC_PAGE_SCHEME_KEY_RENAME:{
					if(state == 0x01){
						SET(R_SCHEME_KEY_RENAME_DOWN);
					}
					else if(state == 0x00){
						SET(R_SCHEME_KEY_RENAME_UP);
					}	
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SAVE_USB:{
					if(state == 0x01){
						SET(R_SCHEME_KEY_SAVE_USB_DOWN);
					}
					else if(state == 0x00){
						SET(R_SCHEME_KEY_SAVE_USB_UP);
					}
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_LOAD_USB:{
					if(state == 0x01){
						SET(R_SCHEME_KEY_LOAD_USB_DOWN);
					}
					else if(state == 0x00){
						SET(R_SCHEME_KEY_LOAD_USB_UP);
					}
					break;
				}	
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_0:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(0);
					}
					break;
				}	
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_1:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(1);
					}
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_2:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(2);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_3:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(3);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_4:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(4);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_5:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(5);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_6:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(6);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_7:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(7);
					}
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_8:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(8);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_9:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(9);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_10:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(10);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_11:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(11);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_12:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(12);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_13:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(13);
					}					
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_14:{	
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(14);
					}				
					break;
				}
				case GDDC_PAGE_SCHEME_KEY_SCHEME_SELECT_15:{
					if(state == 0x01){
						unselectSchemeNum(NVRAM0[DM_SCHEME_NUM]);
						unselectSchemeNum(NVRAM0[EM_SCHEME_NUM_TMP]);
						seletcSchemeNum(15);
					}
					break;
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_DIAGNOSIS_0:{
			switch(control_id){
				case GDDC_PAGE_DIAGNOSIS_KEY_ENTER_OK:{
					SET(R_DIAGNOSIS_OK_DOWN);
					break;
				}
				default:break;
			}
		}
		default:break;
	}
}

void NotifyScreen(uint16_t screen_id){
    //TODO: 添加用户代码

}

//触摸坐标事件响应
//press 1按下触摸屏，3松开触摸屏;x x坐标;y y坐标
void NotifyTouchXY(uint8_t press,uint16_t x,uint16_t y){
    //TODO: 添加用户代码
}


/*! 
*  \brief  更新数据
*/ 
void UpdateUI(void){

}




/*! 
*  \brief  文本控件通知
*  \details  当文本通过键盘更新(或调用GetControlValue)时，执行此函数
*  \details  文本控件的内容以字符串形式下发到MCU，如果文本控件内容是浮点值，
*  \details  则需要在此函数中将下发字符串重新转回浮点值。
*  \param screen_id 画面ID
*  \param control_id 控件ID
*  \param str 文本控件内容
*/
void NotifyText(uint16_t screen_id, uint16_t control_id, uint8_t *str){
                                                                           
}                                                                                

/*!                                                                              
*  \brief  进度条控件通知                                                       
*  \details  调用GetControlValue时，执行此函数                                  
*  \param screen_id 画面ID                                                      
*  \param control_id 控件ID                                                     
*  \param value 值                                                              
*/                       


void NotifyProgress(uint16_t screen_id, uint16_t control_id, uint32_t value){ 
	uint8_t dispBuf[16];
	switch(screen_id){
		case GDDC_PAGE_STANDBY_CW_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_CW_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_CW);					
					break;
				}
				case GDDC_PAGE_STANDBY_CW_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_CW);
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_SP_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_SP_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SP);
					break;
				}
				case GDDC_PAGE_STANDBY_SP_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SP);				
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_MP_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_MP_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_MP);
					break;
				}
				case GDDC_PAGE_STANDBY_MP_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_MP);		
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_GP_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_GP_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_GP);
					break;
				}
				case GDDC_PAGE_STANDBY_GP_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_GP);
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_SIGNAL_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_SIGNAL);
					break;
				}
				case GDDC_PAGE_STANDBY_SIGNAL_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_SIGNAL);
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_STANDBY_DERMA_0:{
			switch(control_id){
				case GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH0:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH0] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH0 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH0, LASER_MODE_DERMA);
					break;
				}
				case GDDC_PAGE_STANDBY_DERMA_PROGRESS_CH1:{
					if(value > 100){
						value = 100;
					}
					if(value < 0){
						value = 0;
					}
					NVRAM0[EM_LASER_POWER_CH1] = (int16_t)(value * CONFIG_MAX_LASERPOWER_CH1 / 100);
					NVRAM0[EM_TOTAL_POWER] = NVRAM0[EM_LASER_POWER_CH0] + NVRAM0[EM_LASER_POWER_CH1];
					updaePowerDisplay(LASER_SELECT_CH1, LASER_MODE_DERMA);
					break; 					
				}
				default:break;
			}
			break;
		}
		case GDDC_PAGE_OPTION_0:{
			switch(control_id){
				case GDDC_PAGE_OPTION_PROGRESS_AIM_BRG:{
					if(value >= CONFIG_MIN_AIM_BRG && value <= CONFIG_MAX_AIM_BRG){
						NVRAM0[DM_AIM_BRG] = (int16_t)value;
					}
					else{
						NVRAM0[DM_AIM_BRG] = CONFIG_MAX_AIM_BRG;
					}	
					break;
				}
				case GDDC_PAGE_OPTION_PROGRESS_BEEM_VOLUME:{
					if(value >= CONFIG_MIN_BEEM_VOLUME && value <= CONFIG_MAX_BEEM_VOLUME){
						NVRAM0[DM_BEEM_VOLUME] = (int16_t)value;
					}
					else{
						NVRAM0[DM_BEEM_VOLUME] = CONFIG_MAX_BEEM_VOLUME;
					}
					break;
				}
				case GDDC_PAGE_OPTION_PROGRESS_LCD_BRG:{
					if(value >= CONFIG_MIN_LCD_BRG && value <= CONFIG_MAX_LCD_BRG){
						NVRAM0[DM_LCD_BRG] = (int16_t)value;
					}
					else{
						NVRAM0[DM_LCD_BRG] = CONFIG_MAX_LCD_BRG;
					}
					SetBackLight((uint8_t)(NVRAM0[DM_LCD_BRG] * 255 / 100));
					break;
				}					
			
				default:break;
			}
			break;
		}
	}
}                                                                                

/*!                                                                              
*  \brief  滑动条控件通知                                                       
*  \details  当滑动条改变(或调用GetControlValue)时，执行此函数                  
*  \param screen_id 画面ID                                                      
*  \param control_id 控件ID                                                     
*  \param value 值                                                              
*/                                                                              
void NotifySlider(uint16_t screen_id, uint16_t control_id, uint32_t value){                                                                                                                                  

}

/*! 
*  \brief  仪表控件通知
*  \details  调用GetControlValue时，执行此函数
*  \param screen_id 画面ID
*  \param control_id 控件ID
*  \param value 值
*/
void NotifyMeter(uint16_t screen_id, uint16_t control_id, uint32_t value){
    //TODO: 添加用户代码
}

/*! 
*  \brief  菜单控件通知
*  \details  当菜单项按下或松开时，执行此函数
*  \param screen_id 画面ID
*  \param control_id 控件ID
*  \param item 菜单项索引
*  \param state 按钮状态：0松开，1按下
*/
void NotifyMenu(uint16_t screen_id, uint16_t control_id, uint8_t item, uint8_t state){

}

/*! 
*  \brief  选择控件通知
*  \details  当选择控件变化时，执行此函数
*  \param screen_id 画面ID
*  \param control_id 控件ID
*  \param item 当前选项
*/
void NotifySelector(uint16_t screen_id, uint16_t control_id, uint8_t  item){


}

/*! 
*  \brief  定时器超时通知处理
*  \param screen_id 画面ID
*  \param control_id 控件ID
*/
void NotifyTimer(uint16_t screen_id, uint16_t control_id){
}

/*! 
*  \brief  读取用户FLASH状态返回
*  \param status 0失败，1成功
*  \param _data 返回数据
*  \param length 数据长度
*/
void NotifyReadFlash(uint8_t status,uint8_t *_data,uint16_t length){
    //TODO: 添加用户代码
}

/*! 
*  \brief  写用户FLASH状态返回
*  \param status 0失败，1成功
*/
void NotifyWriteFlash(uint8_t status){
    //TODO: 添加用户代码
}


void NotifyReadRTC(uint8_t year,uint8_t month,uint8_t week,uint8_t day,uint8_t hour,uint8_t minute,uint8_t second){
     
}

/*! 
*  \brief  string 转 int
*  \param char *str  数字字符串
*/
int str2int(const char *str){
    int temp = 0;
    const char *ptr = str;                                                            //记录字符串

    if(*str == '-' || *str == '+')                                                    //判断第一个字符是否是正负
    {                                                                            
        str++;                                                                        //偏移一位
    }                                                                            
    while(*str != 0)                                                             
    {                                                                            
        if ((*str < '0') || (*str > '9'))                                             //检测是否为数字字符 
        {                                                                        
            break;                                                               
        }                                                                        
        temp = temp * 10 + (*str - '0');                                              //转换
        str++;                                                                        //偏移一位
    }                                                                            
    if (*ptr == '-')                                                                  //如果为负数就取反
    {
        temp = -temp;
    }

    return temp;   
}

#endif