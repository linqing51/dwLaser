C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MODBUSPORT
OBJECT MODULE PLACED IN .\Objects\ModbusPort.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Modbus\ModbusPort.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Lib;.\Driver;.\Mai
                    -nApp\sPlc;.\MainApp\sPlc_Port;.\Modbus;.\MainApp) DEBUG OBJECTEXTEND CODE LISTINCLUDE SYMBOLS PRINT(.\Listings\ModbusPor
                    -t.lst) PREPRINT(.\Listings\ModbusPort.i) OBJECT(.\Objects\ModbusPort.obj)

line level    source

   1          #include "modbusPort.h"
   1      =1  #ifndef __MODBUSPORT__H__
   2      =1  #define __MODBUSPORT__H__
   3      =1  /*****************************************************************************/
   4      =1  #include "appConfig.h"
   1      =2  #ifndef __APPCONFIG_H__
   2      =2  #define __APPCONFIG_H__
   3      =2  /*****************************************************************************/
   4      =2  #define DEBUG_LED_ON                                            0
   5      =2  #define DEBUG_LED_OFF                                           1
   6      =2  <<<<<<< HEAD
*** ERROR C141 IN LINE 6 OF .\MainApp\appConfig.h: syntax error near '<<', expected 'hdata'
   7      =2  #define CONFIG_SYSCLK                       (48000000L)//F580ƒ⁄≤ø48M
   8      =2  =======
*** ERROR C129 IN LINE 8 OF .\MainApp\appConfig.h: missing ';' before '=='
   9      =2  #define CONFIG_SYSCLK                       (22118400L)
*** WARNING C317 IN LINE 9 OF .\MainApp\appConfig.h: attempt to redefine macro 'CONFIG_SYSCLK'
  10      =2  #ifdef C8051F020
           =2 >>>>>>> MCFCL_25MP
           =2 #define SAR_CLK                                                 2000000L//ADC0 ±÷” <2.5MHz
           =2 #define CONFIG_DEBUG                        0//µ˜ ‘π¶ƒ‹
           =2 <<<<<<< HEAD
           =2 #define CONFIG_USING_WDT                                        0// πƒ‹ø¥√≈π∑
           =2 #define CONFIG_USING_RESET                                      0// πƒ‹PLC∏¥ŒªMCUπ¶ƒ‹
           =2 #define CONFIG_LADDER_SECTORS_START                     64//÷∏¡Ó∆ ºµÿ÷∑
           =2 #define CONFIG_LADDER_SECTORS_END                       128//÷∏¡ÓΩ· ¯µÿ÷∑
           =2 #define CONFIG_LASERTIMER_OVERFLOW_US           1000L//∂® ±∆˜÷‹∆⁄ 1mS
           =2 #define CONFIG_VERSION                                          0x0001
           =2 #define CONFIG_CHECK_CODE                                       0x5A7E
           =2 
           =2 =======
           =2 >>>>>>> MCFCL_25MP
           =2 /*****************************************************************************/
           =2 #define CONFIG_UART0_BAUDRATE                           115200//¥Æø⁄≤®Ãÿ¬ 
           =2 #define CONFIG_UART0_PARITY                                     NONE
           =2 #define CONFIG_UART0_STOPBIT                            1
           =2 #define CONFIG_UART0_DATABIT                            8
           =2 
           =2 #define CONFIG_UART1_BAUDRATE                           9600//¥Æø⁄≤®Ãÿ¬ 
           =2 #define CONFIG_UART1_PARITY                                     NONE
           =2 #define CONFIG_UART1_STOPBIT                            1
           =2 #define CONFIG_UART1_DATABIT                            8
           =2 /*****************************************************************************/
           =2 <<<<<<< HEAD
           =2 #define CONFIG_I2C0_FREQ                                        1            
           =2 #define CONFIG_I2C1_FREQ                                        1
           =2 #define CONFIG_I2C2_FREQ                                        1
           =2 #define CONFIG_I2C3_FREQ                                        1
           =2 #define CONFIG_I2C4_FREQ                                        1
           =2 =======
           =2 #define CONFIG_I2C0_FREQ                                        1 
           =2 >>>>>>> MCFCL_25MP
           =2 #define CONFIG_I2C_WAITACT_TIME                         250
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 2   

           =2 /*****************************************************************************/
           =2 #define CONFIG_EPROM_DEBUG                                      0
           =2 #define CONFIG_EPROM_SIZE                                       CONFIG_AT24C64_SIZE
           =2 #define CONFIG_AT24C02_SIZE                             256
           =2 #define CONFIG_AT24C04_SIZE                             512
           =2 #define CONFIG_AT24C08_SIZE                             1024
           =2 #define CONFIG_AT24C16_SIZE                             2048
           =2 #define CONFIG_AT24C32_SIZE                             4096
           =2 #define CONFIG_AT24C64_SIZE                                     8192
           =2 #define CONFIG_AT24C128_SIZE                            16384
           =2 #define CONFIG_AT24C256_SIZE                            32768
           =2 #define CONFIG_EPROM_ADDRESS                            0x50
           =2 #define CONFIG_EPROM_FRAM                                       0//Ã˙µÁ¥Ê¥¢ÃÂŒﬁ–¥»Îµ»¥˝
           =2 <<<<<<< HEAD
           =2 #define CONFIG_EPROM_FREQ                                       1//
           =2 #define CONFIG_EPROM_PAGEWRITE                          0//“≥–¥»Î
           =2 /*****************************************************************************/
           =2 #define CONFIG_USE_IPID                                         1// πƒ‹IPIDŒ¬∂»øÿ÷∆
           =2 /*****************************************************************************/
           =2 #define CONFIG_USE_HWVER_SHOW                           1// πƒ‹πÃº˛∞Ê±æœ‘ æ
           =2 #define CONFIG_USE_MPD1_SHOW                            1// πƒ‹MPD1≤‚¡øœ‘ æ
           =2 #define CONFIG_USE_MPD2_SHOW                            1// πƒ‹MPD2≤‚¡øœ‘ æ
           =2 #define CONFIG_USE_FBS1                                         1// πƒ‹FBS1ºÏ≤‚
           =2 #define CONFIG_USE_FBS2                                         1// πƒ‹FBS2ºÏ≤‚
           =2 #define CONFIG_USE_LASER_TEMP                           1// πƒ‹º§π‚∆˜Œ¬∂»œ‘ æ
           =2 #define CONFIG_USE_RADIATOR_TEMP                        1// πƒ‹…¢»»∆˜Œ¬∂»œ‘ æ
           =2 #define CONFIG_USE_ENVI_TEMP                            1// πƒ‹ª∑æ≥Œ¬∂»œ‘ æ
           =2 #define CONFIG_USE_IPID_UPDATE                          1// πƒ‹IPID≤Œ ˝∏¸–¬π¶ƒ‹
           =2 #define CONFIG_USE_IPID_OUTSHOW                         1// πƒ‹IPID ‰≥ˆœ‘ æ
           =2 =======
           =2 #define CONFIG_EPROM_PAGEWRITE                          0//“≥–¥»Î
           =2 >>>>>>> MCFCL_25MP
           =2 /*****************************************************************************/
           =2 //SPLC…Ë÷√
           =2 #define CONFIG_SPLC_ASSERT                                      1//ºÏ≤Èµÿ÷∑∑∂Œß
           =2 #define CONFIG_SPLC_DEV                                         0x0A01//…Ë±∏∫≈
           =2 #define CONFIG_SPLC_CLEAR_CODE                          0xA58E
           =2 #define CONFIG_SOFTPLC_HWTIME                           1000L//1mS
           =2 #define CONFIG_INPUT_FILTER_TIME                        3// ‰»Î ˝◊÷¬À≤®…®√Ë÷‹∆⁄ 1mS * N
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_CLEAR_NVRAM           1//∆Ù”√«Â≥˝NVRAMπ¶ƒ‹
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_WDT                           1//ø¥√≈π∑∆Ù”√
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_IO_INPUT                      1// ‰»ÎIOÀ¢–¬∆Ù”√
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_IO_OUTPUT                     1// ‰≥ˆIOÀ¢–¬∆Ù”√
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_EPROM                         1//EPROMµÙµÁ¥Ê¥¢∆Ù”√
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_UART1                         1//UART1¥Æø⁄∆Ù”√
           =2 #if CONFIG_SPLC_USING_UART1 == 1
           =2 #define SPLC_UART1                                                      1
           =2 #endif
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_CADC                          1// πƒ‹ADCƒ£øÈ
           =2 #define CONFIG_SPLC_ADC_FILTER_TAP                      14//ADCŒª“∆¬À≤®¥Œ ˝
           =2 #define CONFIG_SPLC_ADC_CHANNLE                         64//ADCÕ®µ¿ ˝
           =2 #define CONFIG_SPLC_ADC_TEMP_SENSOR_GAIN    3330L// Temp Sensor Gain in (uV / degC)
           =2 #define CONFIG_SPLC_ADC_TEMP_SENSOR_OFFSET  856L// Temp Sensor Offset in mV
           =2 #define CONFIG_SPLC_ADC_INTERNAL_VREF           2400L// ADC Voltage Reference (mV)
           =2 #define CONFIG_SPLC_ADC_AMBIENT             25L// Ambient temp in deg C
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 3   

           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_DAC                           1// «ƒ‹DACƒ£øÈ
           =2 /*****************************************************************************/
           =2 #define CONFIG_SPLC_USING_MB_RTU_SLAVE          1// «ƒ‹MODBUS RTU¥”’æ
           =2 #define CONFIG_MB_RTU_SLAVE_TIMER                       1000L//1000uS
           =2 #define CONFIG_MB_RTU_SLAVE_ADDRESS                     0x01//¥”…Ë±∏µÿ÷∑
           =2 #define CONFIG_MB_RTU_SLAVE_BUFFER_SIZE         256//∑¢ÀÕΩ” ’ª∫≥Â«¯
           =2 #define CONFIG_MB_RTU_SLAVE_TIMEOUT                     100//Ω” ’Õ®—∂≥¨ ± 10mS
           =2 #define CONFIG_MB_RTU_SLAVE_IO_DELAY            1//RX TX«–ªª—” ±
           =2 /*****************************************************************************/
           =2 <<<<<<< HEAD
           =2 /*****************************************************************************/
           =2 #define DISABLE_MODBUS_SERIAL_INTERRUPT         ES0 = 0;
           =2 #define ENABLE_MODBUS_SERIAL_INTERRUPT          ES0 = 1;
           =2 #define DISABLE_INTERRUPT                                       EA = 0;
           =2 #define ENABLE_INTERRUPT                                        EA = 1;
           =2 /*****************************************************************************/
           =2 
           =2 /*****************************************************************************/
           =2 #define ID_ONLY_1_CHANNEL                                       4321
           =2 #define ID_ONLY_2_CHANNEL                                       8765
           =2 #define ID_BOTH_CHANNEL                                         9431
           =2 #define ID_LASER_MODE_CW                                        7631
           =2 #define ID_LASER_MODE_SP                                        8934
           =2 #define ID_LASER_MODE_MP                                        2453
           =2 #define ID_LASER_MODE_GP                                        3876
           =2 /*****************************************************************************/
           =2 #define FBS1_IN_PORT                                            3
           =2 #define FBS2_IN_PORT                                            2
           =2 #define COOLON_OUT_PORT                                         (1 * 8 + 3)
           =2 /*****************************************************************************/
           =2 //PID FUZZY ƒ£∫˝PID≈‰÷√
           =2 #define CONFIG_TECOUT_CYCLE                                     4000//PID ‰≥ˆ◊™PWM÷‹∆⁄
           =2 /*****************************************************************************/
           =2 =======
           =2 >>>>>>> MCFCL_25MP
           =2 /*****************************************************************************/
           =2 #define DISABLE_MODBUS_SERIAL_INTERRUPT         ES0 = 0;
           =2 #define ENABLE_MODBUS_SERIAL_INTERRUPT          ES0 = 1;
           =2 #define DISABLE_INTERRUPT                                       EA = 0;
           =2 #define ENABLE_INTERRUPT                                        EA = 1;
           =2 /*****************************************************************************/
           =2 //÷∏ æ∫–◊”
           =2 #define R_BOX_RED_SENDED                                        (R_START * 16 + 126)//190
           =2 #define R_BOX_GREEN_SENDED                                      (R_START * 16 + 127)//191
           =2 #define BOX_CMD_STX                                                     0x81
           =2 #define BOX_CMD_ETX                                                     0x84
           =2 #define BOX_SEND_BFADDR                                         (EM_START + 100)//∑¢ÀÕª∫≥Â«¯Œª÷√
           =2 #define BOX_SEND_LENGTH                                         29//∑¢ÀÕ ˝æ›¡ø
           =2 /*****************************************************************************/
           =2 #include "stdint.h"
           =2 #include "stdbool.h"
           =2 #include "endian.h"
           =2 #include "si_toolchain.h"
           =2 #include "compiler_defs.h"
           =2 <<<<<<< HEAD
           =2 #include "C8051F580_defs.h"
           =2 =======
           =2 #include "C8051F020_defs.h"
           =2 >>>>>>> MCFCL_25MP
           =2 /*****************************************************************************/
           =2 #include <stdio.h>
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 4   

           =2 #include <stdlib.h> 
           =2 #include <string.h>
           =2 #include <INTRINS.H>
           =2 #include <ctype.h>
           =2 #include <LIMITS.H>
           =2 #include <math.h>
           =2 <<<<<<< HEAD
           =2 /*****************************************************************************/
           =2 #include "InitDeviceF580.h"
           =2 #include "delay.h"
           =2 #include "i2c0.h"
           =2 #include "i2c1.h"
           =2 #include "i2c2.h"
           =2 #include "i2c3.h"
           =2 #include "i2c4.h"
           =2 #include "i2c5.h"
           =2 #include "i2c6.h"
           =2 #include "eprom.h"
           =2 #include "mcp47x6.h"
           =2 #include "inPca9554.h"
           =2 #include "outPca9554.h"
           =2 
           =2 =======
           =2 //#include "crc32.h"
           =2 /*****************************************************************************/
           =2 #include "InitDeviceF020.h"
           =2 #include "delay.h"
           =2 #include "i2c0.h"
           =2 #include "eprom.h"
           =2 #include "dac8568_0.h"
           =2 #include "dac8568_1.h"
           =2 #include "dac8568_2.h"
           =2 #include "dac8568_3.h"
           =2 >>>>>>> MCFCL_25MP
           =2 #if CONFIG_SPLC_USING_UART1 == 1
           =2 #include "sPlcUart.h"
           =2 #endif
           =2 #if CONFIG_SPLC_USING_CADC == 1
           =2 #include "sPlcChipAdc.h"
           =2 #endif
           =2 #if CONFIG_SPLC_USING_DAC == 1
           =2 #include "sPlcDac.h"
           =2 #endif
           =2 /*****************************************************************************/
           =2 #include "Modbus.h"
           =2 #include "ModbusPort.h"
           =2 /*****************************************************************************/
           =2 #include "sPLC.h"
           =2 <<<<<<< HEAD
           =2 #include "sPlcFun.h"
           =2 =======
           =2 #include "sPlcTimer.h"
           =2 #include "sPlcFun.h"
           =2 #include "sPlcLed.h"
           =2 #include "sPlcIo.h"
           =2 #include "sPlcWatchDog.h"
           =2 >>>>>>> MCFCL_25MP
           =2 /*****************************************************************************/
           =2 #endif
   5      =1  /*****************************************************************************/
   6      =1  extern void modBusUartInitialise(uint32_t baudrate);
   7      =1  extern void modBusTimerInitialise(void);
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 5   

   8      =1  extern void modBusUartPutch(uint8_t c);
   9      =1  extern uint8_t modBusUartString(uint8_t *s, uint16_t Length);
  10      =1  extern void receiveInterrupt(uint8_t Data);
  11      =1  /*****************************************************************************/
  12      =1  #endif
   2          /*****************************************************************************/
   3          /*****************************************************************************/
   4          <<<<<<< HEAD
   5          void initModbusSerial(int32_t baudrate){//ÂàùÂßãÂåñMODBUS‰∏≤Âè£
   6                  uint8_t SFRPAGE_save;
   7                  uint16_t tmp;
   8                  SFRPAGE_save = SFRPAGE; 
   9                  SFRPAGE = ACTIVE_PAGE;
  10          =======
  11          void initModbusSerial(int32_t baudrate)
  12          {//ÂàùÂßãÂåñMODBUS‰∏≤Âè£
  13                  CKCON |= (1 << 5);//Timer2 uses the system clock
  14                  T2CON &= ~(1 << 0);//ÂΩìÂÆöÊó∂Âô®2 Ê∫¢Âá∫ÊàñT2EX ‰∏äÂèëÁîüË¥üË∑≥ÂèòÊó∂Â∞ÜËá™Âä®ÈáçË£ÖËΩΩÔºàEXEN2=1Ôºâ
  15                  T2CON &= ~(1 << 1);//ÂÆöÊó∂Âô®ÂäüËÉΩÔºöÂÆöÊó∂Âô®2 Áî±T2MÔºàCKCON.5ÔºâÂÆö‰πâÁöÑÊó∂ÈíüÂä†1
  16                  T2CON |= (1 << 4);//Timer 2 overflows used for transmit clock.
  17                  T2CON |= (1 << 5);//Timer 2 overflows used for receive clock.   
  18                  RCAP2  = - ((long) ((uint32_t)CONFIG_SYSCLK / baudrate) / 32L);
  19                  TMR2 = RCAP2;
  20                  TR2= 1;                             // Start Timer2
  21          >>>>>>> MCFCL_25MP
  22                  SCON0 = 0x0;
  23                  SCON0 |= (1 << 4);//REN0=1‰ΩøËÉΩÊé•Êî∂
  24                  SFRPAGE   = CONFIG_PAGE;
  25                  tmp = (uint16_t)(65536L - ((long) ((uint32_t)CONFIG_SYSCLK / baudrate) / 2L));
  26              SBRLL0    = (tmp & 0xFF);
  27              SBRLH0    = (tmp >> 8) & 0xFF;
  28                  SBCON0 = 0x0;
  29                  SBCON0 |= 1 << 0;
  30                  SBCON0 |= 1 << 1;//Prescaler=1
  31                  SBCON0 |= 1 << 6;//SB0RUN = 1Ê≥¢ÁâπÁéáÂèëÁîüÂô®‰ΩøËÉΩ
  32                  SFRPAGE = SFRPAGE_save;
  33                  //RS485_DIRECTION_RXD;//Êé•Êî∂Áä∂ÊÄÅ
  34                  ES0 = 1;
  35                  IP |= (1 << 4);//UART0 ‰∏≠Êñ≠È´ò‰ºòÂÖàÁ∫ß
  36          <<<<<<< HEAD
  37          }
  38          void initModbusTimer(void){//ÂàùÂßãÂåñMODBUSËÆ°Êó∂Âô® 1mS TIMER3
  39                  uint16_t tmp;   
  40                  uint8_t SFRPAGE_save;
  41                  SFRPAGE_save = SFRPAGE;
  42                  tmp = (uint16_t)(65536L - (int32_t)(CONFIG_SYSCLK / 12L / CONFIG_MB_RTU_SLAVE_TIMER));
  43                  SFRPAGE = ACTIVE_PAGE;
  44                  TMR3CN = 0x0;//T3 SYSCLK / 12   
  45                  TMR3RLH = (uint8_t)((tmp >> 8) & 0xFF);
  46                  TMR3RLL = (uint8_t)(tmp & 0xFF);
  47                  TMR3CN |= (1 << 2);
  48                  SFRPAGE = SFRPAGE_save;
  49                  EIE1 |= (1 << 6);//‰ΩøËÉΩT3‰∏≠Êñ≠
  50          =======
  51                  TI0 = 0;//Ê∏ÖÈô§ÂèëÈÄÅÂÆåÊàê            
  52                  RI0 = 0;//Ê∏ÖÈô§Êé•Êî∂ÂÆåÊàê
  53          }
  54          void initModbusTimer(void){//ÂàùÂßãÂåñMODBUSËÆ°Êó∂Âô® 1mS TIMER1
  55                  xdata uint16_t temp;
  56                  temp = (uint16_t)(65536 - (CONFIG_SYSCLK / 12 / CONFIG_MB_RTU_SLAVE_TIMER));
  57                  Timer1_L = (uint8_t)(temp & 0xFF);
  58                  Timer1_H = (uint8_t)((temp >> 8) & 0xFF);
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 6   

  59                  CKCON &= ~(1 << 4);//TIMER1 SYSCLK / 12
  60                  TMOD &= 0x0F;
  61                  TMOD |= (1 << 4);//ÊñπÂºè1Ôºö16 ‰ΩçËÆ°Êï∞Âô®/ÂÆöÊó∂Âô®
  62                  TH1 = Timer1_H;
  63                  TL1 = Timer1_L; 
  64                  TF1 = 0;
  65                  TR1 = 1;        
  66                  ET1 = 1; //ÂºÄ‰∏≠Êñ≠T1
  67          >>>>>>> MCFCL_25MP
  68          }
  69          static void modbusSerialSendbyte(uint8_t *dt){//‰∏≤Âè£ÂèëÈÄÅ‰∏Ä‰∏™Â≠óËäÇ
  70                  uint8_t SFRPAGE_save;
  71                  SFRPAGE_save = SFRPAGE;
  72                  SFRPAGE = ACTIVE_PAGE;
  73                  ES0 = 0;
  74                  TI0 = 0;
  75                  SBUF0 = *dt;
  76                  while( !TI0 ){
  77          #if CONFIG_SPLC_USING_WDT == 1
*** WARNING C322 IN LINE 77 OF Modbus\ModbusPort.c: unknown identifier
                              feedWatchDog();
              #endif
  80                  }
  81                  TI0 = 0;
  82                  ES0 = 1;
  83                  SFRPAGE = SFRPAGE_save;
  84          }
  85          void modBusUartInitialise(uint32_t baudrate){// UART Initialize for Microconrollers, yes you can use anoth
             -er phsycal layer!
  86              initModbusSerial(baudrate);
  87          }
  88          void modBusTimerInitialise(void){// Timer Initialize for Petit Modbus, 1ms Timer will be good for us!
  89              initModbusTimer();
  90          }
  91          void modBusUartPutch(uint8_t c){// This is used for send one character
  92                  modbusSerialSendbyte(&c);
  93          }
  94          uint8_t modBusUartString(uint8_t *s, uint16_t  Length){// This is used for send string, better to use DMA 
             -for it ;)
  95              uint16_t DummyCounter;
  96              for(DummyCounter=0; DummyCounter < Length; DummyCounter ++){
  97                  modBusUartPutch(s[DummyCounter]);
  98              }
  99              return true;
 100          }
 101          void receiveInterrupt(uint8_t Data){//Call this function into your UART Interrupt. Collect data from it!
 102              modbusReceiveBuffer[modbusReceiveCounter] = Data;
 103              modbusReceiveCounter ++;
 104              if(modbusReceiveCounter > CONFIG_MB_RTU_SLAVE_BUFFER_SIZE){  
 105                  modbusReceiveCounter = 0;
 106                  }
 107              modbusTimerValue = 0;
 108          }
 109          /******************************************************************************/
 110          static void modbusHandle() interrupt INTERRUPT_TIMER3 {//Á°¨‰ª∂ËÆ°Êó∂Âô®T3‰∏≠Êñ≠ÂáΩÊï∞ 1mS
 111          #ifdef C8051F020
                      TMR3CN = ~((uint8_t)(1 << 7));
              #endif
 114          #ifdef C8051F580
                      uint8_t SFRPAGE_save;
                      SFRPAGE_save = SFRPAGE;
                      SFRPAGE = ACTIVE_PAGE;
C51 COMPILER V9.59.0.0   MODBUSPORT                                                        01/29/2019 14:24:58 PAGE 7   

                      TMR3CN = ~((uint8_t)(1 << 7));
                      SFRPAGE = SFRPAGE_save;
              #endif
 121                  modbusTimerValue ++;
 122          <<<<<<< HEAD
 123          }
 124          static void serialHandle() interrupt INTERRUPT_UART0 {//UART0 ‰∏≤Âè£‰∏≠Êñ≠Á®ãÂ∫è
 125          #ifdef C8051F202
                      if(RI0){
                              RI0 = 0;        
                              receiveInterrupt(SBUF0);
                      }
                      if(TI0){
                              TI0 = 0;
                      }
              #endif
 134          #ifdef C8051F580
                      uint8_t SFRPAGE_save;
                      SFRPAGE_save = SFRPAGE;
                      SFRPAGE = ACTIVE_PAGE;
              =======
              } 
              
              static void uart0Isr() interrupt INTERRUPT_UART0
              {//UART0 ‰∏≤Âè£‰∏≠Êñ≠Á®ãÂ∫è
              >>>>>>> MCFCL_25MP
                      if(RI0){
                              RI0 = 0;        
                              receiveInterrupt(SBUF0);
                      }
                      if(TI0){
                              TI0 = 0;
                      }
                      SFRPAGE = SFRPAGE_save;
              #endif
 153          } 
*** WARNING C316 IN LINE 153 OF Modbus\ModbusPort.c: unterminated conditionals

C51 COMPILATION COMPLETE.  3 WARNING(S),  2 ERROR(S)
